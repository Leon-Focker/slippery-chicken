<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>slippery chicken documentation - output</title>
    <!-- change the following two file paths to be ../ if in a subdirectory -->
    <link href="../sc-stylesheet.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="../head-foot.js"></script>
    <script language="javascript" type="text/javascript"
            src="../show-hide.js"></script>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  </head>
  
  <body onload="showHide(window.location.hash.substring(1)+'-div')" >
    <div id="content">
      <!-- files in the doc directory will call header with argument "./" but
           those in subdirectories will need "../" -->
      <script type="text/javascript">header("../");</script>
      <noscript>Your browser does not support JavaScript!</noscript>
      <!-- **************************************************************** -->
      
      <h2>Output</h2>

      <h3 id="files"><a href="#files" id="files-div-show"
                        onclick="showHide('files-div');return false;">+</a>
        Associated example files</h3>
      <div id="files-div" class="more">
        <ul>
          <li><a href="../examples/output-examples.lsp">output-examples.lsp</a></li>  
        </ul>
        <p class="close"><a href="#" id="files-div-hide" class="hideLink"
                            onclick="showHide('files-div');return
                            false;">close</a></p> 
        <br />
      </div>

      <p>The musical material generated by <em>slippery chicken</em> can be
        written to files in various formats. The user is not required to
        generate output files in order for <em>slippery chicken</em> to produce
        its data, but the data generated is not audible or printable without
        them. </p>

      <p>The generation of MIDI files requires no extra installation or use of
        additional software, as they are created using a small subset of the
        Common Music (Heinrich Taube) package that comes bundled
        with <em>slippery chicken</em>. The MIDI files generated can be
        imported into notation software such
        as <a href="http://www.finalemusic.com">Finale<a/>, <a href="http://www.sibelius.com">Sibelius</a>,
        or the open-source alternative
        <a href="http://musescore.org">MuseScore</a>  for further
        editing.</p>


      <p>The printable output options involve either Common Music Notation
        (CMN) or LilyPond. CMN must be installed and loaded into the Lisp
        environment before use, as is described on
        the <a href="../installation.html">installation</a> page. The LilyPond
        application can be obtained
        from <a href="http://www.lilypond.org">lilypond.org</a>. </p>

      <h3 id="midi"><a href="#midi" id="midi-div-show"
                       onclick="showHide('midi-div');return false;">+</a>
        MIDI</h3>
      <div id="midi-div" class="more">
        <p>MIDI output can be generated by <em>slippery chicken</em> using the
          <code>midi-play</code> method. This method takes as its only required
          argument a <code>slippery-chicken</code> object, which can also be
          passed as a local variable or as the global variable defined as the
          first argument to the <code>make-slippery-chicken</code>
          function.</p>

        <p>The method also requires a path name and file name for the output it
          generates. These can be set using the optional keyword argument
          <code>:midi-file</code>. If no value is passed to this argument by
          the user, output is written to the default directory (initially /tmp) in
          a MIDI file named from the <code>:title</code> slot of the
          <em>slippery chicken</em> object.</p>

        <p>A common straightforward application of this method may look like
          this:</p>

        <pre class="source">
(midi-play +sc-object+ :midi-file "/path/to/output-file.mid")</pre>

        <h4>Setting MIDI parameters</h4>
        <p>The various settings for MIDI parameters are specified in different
          contexts in <em>slippery chicken</em>. For example, program (or
          "patch") numbers are specified in the definition
          of <code>instrument</code> objects using
          the <code>:midi-program</code> keyword (see the source code
          documentation on
          the <a href="../robodoc/instrument_lsp.html#instrument2fmake2dinstrument"><code>make-instrument</code></a>
          function), and MIDI channel numbers are specified in
          the <code>ensemble</code> block of
          the <code>make-slippery-chicken</code> function (see the page
          on <a href="./ensemble.html">ensembles</a>). Information on the
          features and limitations of microtonal MIDI output can also be found
          on the <a href="./ensemble.html#mt-chans">"players and the
          ensemble"</a> page.</p>

        <p>The <code>midi-play</code> method itself has 7 optional arguments
          that influence the generation of the MIDI file, such
          as <code>start-section</code> and <code>players</code>. Specifics on
          all of the arguments for this method can be found in the source code
          documentation
          for <a href="../robodoc/slippery-chicken_lsp.html#slippery2dchicken2fmidi2dplay"><code>slippery-chicken/midi-play</code></a>.</p>

        <p class="close"><a href="#" id="midi-div-hide" class="hideLink"
              onclick="showHide('midi-div');return false;">close</a></p>
      </div>
      
      <h3 id="cmn"><a href="#cmn" id="cmn-div-show"
                      onclick="showHide('cmn-div');return false;">+</a>
        CMN</h3>
      <div id="cmn-div" class="more">
        <p>The <code>cmn-display</code> method also takes as its only required
          argument a <code>slippery-chicken</code> object, which can also be
          given as a local variable or as the variable defined as the first
          argument to <code>make-slippery-chicken</code>.</p>

        <p>The <code>cmn-display</code> method can also be passed an output
          file name path. This is set to the default directory (initially /tmp)
          and an EPS file named from the <code>:title</code> slot of the
          <em>slippery chicken</em> object by default.  CMN generates encapsulated
          post-script (<code>.eps</code>) files, so the user will require an
          application that is capable of opening <code>.eps</code> files or
          converting them to post-script or PDF, such as Apple's Preview.app or
          the open source software <a href="http://www.gimp.org">GIMP</a>.</p>

        <p>A common straightforward useof this method may look like
          this:</p>

        <pre class="source">
(cmn-display +sc-object+ :file "/path/to/output-file.eps")</pre>
        

        <p>The <code>cmn-display</code> method has 31 optional arguments that
          influence its output. Some of these, such
          as <code>respell-notes</code> or <code>auto-clefs</code>, enable or
          disable algorithms that will first alter the data of
          the <code>slippery-chicken</code> object before generating the output
          file. Others, such as <code>size</code>, <code>page-height</code>, or
          <code>auto-bar-nums</code>, influence the page layout. Specifics on
          all of the arguments for this method can be found in the source code
          documentation
          for <a href="../robodoc/slippery-chicken_lsp.html#slippery2dchicken2fcmn2ddisplay"><code>slippery-chicken/cmn-display</code></a>.</p>

        <h4>CMN for quick previewing</h4>
        <p>CMN's output can be useful as a preview, as it is easy to generate
          the whole score within Lisp and CMN generally runs faster than
          LilyPond. In some cases however, CMN will produce collisions of
          symbols on the page that can only be adjusted manually using external
          software such
          as <a href="http://www.adobe.com/products/illustrator.html">Adobe
          Illustrator</a> or the open-source
          application <a href="http://inkscape.org/">Inkscape</a>. The use of
          LilyPond is encouraged for generating printable output that may
          require less post-generation tweaking.  </p>

        <p class="close"><a href="#" id="cmn-div-hide" class="hideLink"
              onclick="showHide('cmn-div');return false;">close</a></p>
      </div>

      <h3 id="cmn-sets"><a href="#cmn-sets" id="cmn-sets-div-show"
                           onclick="showHide('cmn-sets-div');return
                           false;">+</a> 
        Including pitch sets in CMN scores</h3>
      <div id="cmn-sets-div" class="more">
        <p>The user can have the <code>cmn-display</code> method print the sets
          of pitches used in each sequence of a <code>slippery-chicken</code>
          object on separate staves at the bottom of the score by setting
          the <code>display-sets</code> keyword argument
          of <code>cmn-display</code> to <code>T</code> when applied to a
          complete <code>slippery-chicken</code> object:</p>

        <pre class="source">
(let* ((sc-piece
       (make-slippery-chicken
        '+sc-piece+
        :ensemble '(((vn (violin :midi-channel 1))))
        :set-palette '((1 ((c4 d4 e4 f4 g4 a4 b4 c5)))
                       (2 ((af3 bf3 c4 df4 ef4 f4 g4 af4)))
                       (3 ((fs3 gs3 as3 b3 cs4 ds4 es4 fs4))))
        :set-map '((1 (1 2 3)))
        :rthm-seq-palette '((1 ((((2 4) (e) e e e))
                                :pitch-seq-palette ((1 2 3)))))
        :rthm-seq-map '((1 ((vn (1 1 1))))))))
  (cmn-display sc-piece :file "/tmp/sc-piece.eps" :display-sets t))</pre>

        <table class="image">
          <!-- for a 150ppi CMN png fragment scale width by .6 -->
          <tr><td><img class="fragment"
                       src="./resources/output-cmn-display-sets.png"
                       alt="output-cmn-display-sets.png" width="530"
                       /></td></tr>
        </table>

        <p>More information on this can be found in the source code
          documentation
          for <a href="../robodoc/slippery-chicken_lsp.html#slippery2dchicken2fcmn2ddisplay">slippery-chicken/cmn-display</a>.</p>
      
        <p class="close"><a href="#" id="cmn-sets-div-hide" class="hideLink"
              onclick="showHide('cmn-sets-div');return false;">close</a></p>
      </div>

      <h3 id="cmn-frags"><a href="#cmn-frags" id="cmn-frags-div-show"
                            onclick="showHide('cmn-frags-div');return
                            false;">+</a>
        CMN output of just set-palettes and rthm-seq-palettes</h3>
      <div id="cmn-frags-div" class="more">
        <p>The <code>cmn-display</code> method can also be used to generate
          printable output of individual <code>set-palette</code>
          or <code>rthm-palette</code> objects by applying the method directly
          to them:</p>

        <pre class="source">
(let* ((sp (make-set-palette 
            'sp-data
            '((set1 ((c3 g3 cs4 e4 fs4 a4 bf4 c5 d5 f5 gf5 af5 ef6)))
              (set2 ((c3 fs3 cs4 e4 g4 a4 b4 c5 df5 f5 g5 af5 ef6)))
              (set3 ((d3 f3 cs4 e4 fs4 a4 b4 c5 d5 e5 fs5 af5 ef6)))
              (set4 ((d3 e3 cs4 ef4 fs4 a4 b4 c5 d5 e5 fs5 af5 d6)))))))
  (cmn-display sp :file "/tmp/sp-out.eps" :break-line-each-set nil :size 16))</pre>

        <table class="image">
          <!-- for a 150ppi CMN png fragment scale width by .6 -->
          <tr><td><img class="fragment" src="./resources/output-cmn-sp.png" 
                       alt="output-cmn-sp.png" width="710" /></td></tr>
        </table>

        <pre class="source">
(let* ((rsp (make-rsp
            'rsp-frag
            '((seq1 ((((2 4) q +e. s)
                      ((s) e (s) q)
                      (+e. s { 3 (te) te te } ))
                     :pitch-seq-palette (1 2 3 4 5 6 7)))
              (seq2 ((((3 4) (e.) s { 3 te te te } +q)
                      ({ 3 +te (te) te } e e (q)))
                     :pitch-seq-palette (2 3 4 5 6 7 8)))
              (seq3 ((((2 4) e e { 3 te te te })
                      ((5 8) (e) e e e s s))
                     :pitch-seq-palette (3 4 5 6 7 8 9 10 1 2)))))))
  (cmn-display rsp :file "/tmp/rsp-out.eps"))</pre>

        <table class="image">
          <!-- for a 150ppi CMN png fragment scale width by .6 -->
          <tr><td><img class="fragment" src="./resources/output-cmn-rsp.png"
                       alt="output-cmn-rsp.png" width="721" /></td></tr>
        </table>

        <p>More information on using <code>cmn-display</code>
          with <code>set-palette</code> and <code>rthm-seq-palette</code>
          objects, as well as the arguments available for those contexts, can
          be found in the source code documentation
          for <a href="../robodoc/set-palette_lsp.html#set2dpalette2fcmn2ddisplay"><code>set-palette/cmn-display</code></a>
          and <a href="../robodoc/rthm-seq-palette_lsp.html#rthm2dseq2dpalette2fcmn2ddisplay"><code>rthm-seq-palette/cmn-display</code></a>. </p>

        <p class="nb">NB: There is no <code>cmn-display</code> method
          for <code>rthm-seq-map</code> objects, as this would essentially be
          the same as applying the method to the <code>slippery-chicken</code>
          object. </p>

        <p class="close"><a href="#" id="cmn-frags-div-hide" class="hideLink"
              onclick="showHide('cmn-frags-div');return false;">close</a></p>
      </div>

      <h3 id="lilypond"><a href="#lilypond" id="lilypond-div-show"
                           onclick="showHide('lilypond-div');return
                           false;">+</a>
        LilyPond</h3>
      <div id="lilypond-div" class="more">

        <p>See <a href="coreUsage.html#lilypond">core usage</a> for discussion
        of automatically calling Lilypond and opening the resultant PDF when
        working with SBCL on OSX.</p>
        
        <p>The <code>write-lp-data-for-all</code> method produces all of
          the <code>.ly</code> files needed by the LilyPond application to
          typeset the musical data of the given <code>slippery-chicken</code>
          object. While the method doesn't run LilyPond automatically, as
          the <code>cmn-display</code> method does with CMN, it does produce
          separate files for the score and each of the individual players
          of that object.</p>

        <p>The method generates the file names of its output automatically
          based on the <code>title</code> slot of
          the <code>slippery-chicken</code> object. The file for the score can
          be identified by the underscore placed at the beginning of the file
          name and the <code>-score</code> suffix placed at the end. The names
          of the files for the parts consist of the title, the player ID, and
          the suffix <code>-part</code>. The additional <code>-def</code> file
          need not be accessed directly by the user, but is required by
          LilyPond.</p>

        <h4>Arguments</h4>
        <p>This method also takes as its only required argument
          a <code>slippery-chicken</code> object, which can also be given as a
          local variable or as the global variable defined as the first
          argument to the
          <code>make-slippery-chicken</code> function. The output path can be
          specified using the keyword argument <code>:base-path</code>. As
          opposed to the methods for the MIDI and CMN output,
          the <code>write-lp-data-for-all</code> method requires no file name
          with the path, as it generates the file names automatically. If no
          output path is specified by the user, the method uses the default
          path of <code>"/tmp/"</code>.</p>

        <p>A common straightforward application of this method may look like
          this:</p>
        
        <pre class="source">
(write-lp-data-for-all +sc-object+ :base-path "/tmp/")</pre>


        <p>The <code>write-lp-data-for-all</code> method has 28 optional
          arguments, which, like those of the <code>cmn-display</code> method,
          influence both the layout as well as the data of
          the <code>slippery-chicken</code> object itself prior to generating
          output. Specifics on all of the arguments for this method can be
          found in the source code documentation
          for <a
          href="../robodoc/slippery-chicken_lsp.html#slippery2dchicken2fwrite2dlp2ddata2dfor2dall"><code>slippery-chicken/write-lp-data-for-all</code></a>.</p>

    <p class="nb">NB: <a href="coreUsage.html#lp-ins-names">See also this
    note</a> about Lilypond and instrument names.


        <h4>LilyPond .app/.exe vs. command-line</h4>
        <p>LilyPond was originally designed for command-line use, and although
          it now comes packaged as a standalone executable for Mac
          (LilyPond.app) and Windows (LilyPad.exe), command-line usage is still
          an option.</p>

        <p class="nb">NB: As of July 2012, the LilyPond.app was not yet
          compatible with Mac OSX 10.7.x ("Lion"). However, LilyPond can still
          be used on Lion from the command-line. Please refer to the
          documentation on
          the <a href="http://lilypond.org/macos-x.html">LilyPond website</a>
          for more information on how to do this. </p>

        <p class="nb">Update June 1st 2013: The Lilypond 2.16.2 app now runs on
        Lion.  However in the meantime there's also the
        <em>slippery-chicken</em> <a
href="../robodoc/slippery-chicken_lsp.html#slippery2dchicken2flp2ddisplay">
        lp-display</a> macro for rendering scores all within the SBCL/OSX
        environment.

        <p class="nb">NB: LilyPond can take a long time to render output of
          larger scores, during which time it is unresponsive and may appear to
          have hung or frozen. </p>

        <p class="close"><a href="#" id="lilypond-div-hide" class="hideLink"
              onclick="showHide('lilypond-div');return false;">close</a></p>
</div>

      <h3 id="musicxml"><a href="#musicxml" id="musicxml-div-show"
                           onclick="showHide('musicxml-div');return
                           false;">+</a>
        MusicXML</h3>
      <div id="musicxml-div" class="more">

        <p><a href="https://www.musicxml.com/">Music XML</a> output has been
        available since slippery-chicken version 1.08. It allows the generation
        of MusicXML code in text form for input into various music notation
        programmes such as Finale, Dorico, Sibelius, MuseScore, NoteAbilityPro,
        etc. Note that while the import of MusicXML files into those programmes
        is generally good, different software/versions will import varying
        amounts of the encoded data and display it with varying degrees of
        success. Some (e.g. MuseScore, NoteAbilityPro) sadly fall over when
        trying to import more complex notations such as nested tuplets. So
        experimentation is necessary as well as acceptance that MusicXML is not
        the save-all you might hope it to be. It is, however, much, much better
        than MIDI import into notation programmes.</p>

        <p>Overall, my experience during the 2017 design and implementation
        process was that Dorico handled MusicXML better than the other software
        named above, even if it didn't import as much as, say, Finale (this may
        change, quickly even, so we'll just leave that there). You can read more
        anecdotally about my experiences of implementing MusicXML for
        slippery-chicken on <a href="http://michael-edwards.org/wp/?p=1105">my
        blog</a>.</p>

        <p>Outputting MusicXML from a slippery-chicken object is very
        straightforward: simply call the <a
        href="../robodoc/slippery-chicken_lsp.html#slippery2dchicken2fwrite2dxml"><code>write-xml</code></a>
        method. All voices for the score and parts are written into one file. As
        it is assumed that editing will take place in the notation software of
        choice, there are only very basic arguments to this method, some of
        which may even be ignored upon import. For example, the :in-c keyword
        argument of other methods is missing here, as switching between
        sounding and transposing scores is assumed to be the job of the notation
        software used after MusicXML import.  </p>

        <p>See the <a
        href="../robodoc/slippery-chicken_lsp.html#slippery2dchicken2fwrite2dxml"><code>write-xml</code></a>
        method for more details, particularly on the method arguments. </p>
        
        <p class="close"><a href="#" id="musicxml-div-hide" class="hideLink"
              onclick="showHide('musicxml-div');return false;">close</a></p>
</div>


      <h3 id="svg"><a href="#svg" id="svg-div-show"
                      onclick="showHide('svg-div');return false;">+</a>
        Third-party SVG editors</h3>
      <div id="svg-div" class="more">
        <p>While both CMN and LilyPond strive to produce scores without the
          need for further editing, some tweaking of the output may
          occasionally be desired. In addition to modifying any of the
          text-based LilyPond files generated, the <code>.eps</code>
          and <code>.pdf</code> files that these applications produce can also
          be manually manipulated using vector graphics editing software such
          as <a href="http://www.adobe.com/products/illustrator.html">Adobe
          Illustrator</a> or an open-source alternative such
          as <a href="http://inkscape.org/">Inkscape</a>. Editing scalable
          vector graphic files (SVG), such as the <code>.eps</code>
          or <code>.pdf</code> files produced by CMN and LilyPond, is easy and
          very intuitive, as whole objects (e.g. note-heads, stems, beams,
          bars, flags, dynamics, articulations etc.) can be simply clicked and
          dragged.</p>

        <p class="close"><a href="#" id="svg-div-hide" class="hideLink"
              onclick="showHide('svg-div');return false;">close</a></p>
      </div>

      <h3 id="clm"><a href="#clm" id="clm-div-show"
                      onclick="showHide('clm-div');return false;">+</a>
        CLM sound file output</h3>
      <div id="clm-div" class="more">
        <p>CLM output in <em>slippery chicken</em> is generated using
          the <code>clm-play</code> method. In its most straightforward form
          that output can be generated as such:</p>

        <pre class="source">
(clm-play +sc-object+ 1 nil 'source-sndfile-grp-1)</pre>

        <p>A detailed description of the <code>clm-play</code> method,
          including instructions for generating output, can be found on
          the <a href="./sc-and-clm.html">slippery chicken and CLM</a>
          page.</p> 

        <p class="close"><a href="#" id="clm-div-hide" class="hideLink"
              onclick="showHide('clm-div');return false;">close</a></p>
      </div>

      <h3 id="clm"><a href="#clm" id="config-div-show"
                      onclick="showHide('config-div');return false;">+</a>
        Default output directories and more</h3>
      <div id="config-div" class="more">

        <p><em>slippery chicken</em> stores various configuration data
        internally and allows you to change it via the function
        <code>set-sc-config</code>.  For instance, with SBCL on OSX, you can
        choose whether to automatically open EPS files:
        <code>(set-sc-config 'cmn-display-auto-open NIL)</code>
        or with any Lisp on any system, to
        change the default directory for output files:
        <code>(set-sc-config 'default-dir "/sc-output/:)</code>.  See <a
         href="../robodoc/globals_lsp.html#globals2f2bslippery2dchicken2dconfig2ddata2b">robodoc</a>
        for details.

        </div>


      <!-- **************************************************************** --> 
      <!-- This spacer <br> is necessary as a buffer between the content and
         the footer. It cannot be added as padding to #push, since #push has to
         be the same size as #footer in order for the dynamic placement to work
         properly --> 
      <br /><br />
      <div id="push"></div>
    </div>
    <script type="text/javascript">footer();</script>
    <noscript>Your browser does not support JavaScript!</noscript>
  </body>
</html>
