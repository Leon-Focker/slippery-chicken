<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>slippery chicken documentation - slippery chicken and clm</title>
    <!-- change the following two file paths to be ../ if in a subdirectory -->
    <link href="../sc-stylesheet.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="../head-foot.js"></script>
    <script language="javascript" type="text/javascript"
            src="../show-hide.js"></script>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  </head>
  
  <body onload="showHide(window.location.hash.substring(1)+'-div')" >
    <div id="content">
      <!-- files in the doc directory will call header with argument "./" but
           those in subdirectories will need "../" -->
      <script type="text/javascript">header("../");</script>
      <noscript>Your browser does not support JavaScript!</noscript>
      <!-- **************************************************************** --> 
      
      <h2>slippery chicken and CLM</h2>

      <h3 id="files"><a href="#files" id="files-div-show"
                        onclick="showHide('files-div');return false;">+</a>
        Associated example files</h3>
      <div id="files-div" class="more">
        <ul>
          <li><a href="../examples/sc-and-clm-examples.lsp">sc-and-clm-examples.lsp</a></li>  
        </ul>
        <p class="close"><a href="#" id="files-div-hide" class="hideLink"
                            onclick="showHide('files-div');return
                            false;">close</a></p> 
        <br />
      </div>

      <p class="nb">NB: An exercise relating to the material covered
        in this tutorial can be found on
        the <a href="./exercises.html#clm">Exercises</a> page.</p>

      <p><em>slippery chicken's</em> <code>clm-play</code> method allows the
        user to generate sound files based on the data structures of a
        <code>slippery-chicken</code> object. By default, the method takes one
        or more source sound files specified in the <a
         href="../robodoc/sndfile-palette_lsp.html"><code>sndfile-palette</code></a>
        and uses them (or segments of them) to create a new sound file based on
        the rhythms and certain aspects of the pitch material of a specified
        player or players within a given <code>slippery-chicken</code>
        object. User-defined CLM instruments can be substituted however and
        these may of course perform any time of synthesis or signal processing
        (see below)</p>

      <h3 id="out"><a href="#out" id="out-div-show"
                      onclick="showHide('out-div');return false;">+</a> 
        Setting the output directory</h3>
      <div id="out-div" class="more">
        <p>The user must first designate the output path for the new sound
          file. This is done by setting the <code>slippery-chicken</code>
          object's <code>snd-out-dir</code> slot: </p>

        <pre class="source">
:snd-output-dir "/tmp/"</pre>

        <p class="close"><a href="#" id="out-div-hide" class="hideLink"
              onclick="showHide('out-div');return false;">close</a></p>
      </div>
      
      <h3 id="pal"><a href="#pal" id="pal-div-show"
                      onclick="showHide('pal-div');return false;">+</a> 
        The sndfile-palette</h3>
      <div id="pal-div" class="more">
        <p>The user must then define
          a <a href="../robodoc/sndfile-palette_lsp.html"><code>sndfile-palette</code></a>
          consisting of source sound files from which the new sound file will
          be created. The <code>sndfile-palette</code> takes a list containing
          at least one group, each group in turn containing a list with the
          name of at least one source sound file. The sound file names can be
          given without their file extensions if desired. If the user chooses
          to omit the extensions here, they must be specified in a list as the
          last element in the <code>sndfile-palette</code> (see below).</p>

        <p>The list of groups is followed by a list of paths to the disk
          locations where the source sound files are stored. The source sound
          files can be located in any of the specified disk locations.  NB
          Paths are not recursively searched so if some files are in
          subfolders, the paths to those subfolders must be in the list.
        </p>

        <p>If the user has chosen to omit the file extensions from the file
          names, they must then be provided (minus the dot) as strings in a
          list as the last element of the <code>sndfile-palette</code>.</p>

        <pre class="source">
:sndfile-palette '(((developing-group
                              ((test-sndfile-1)
                               (test-sndfile-2)
                               (test-sndfile-3)))
                             (percussive-group
                              ((test-sndfile-4)
                               (test-sndfile-5)
                               (test-sndfile-6))))
                            ("/path/to/source-sndfiles/")
                            ("aiff"))</pre> 

        <p>Only one group (or a maximum of two if a transition is to be made)
          can be used in each call to <code>clm-play</code>, but different
          groups can be used in separate calls to the method to generate output
          files with the same rhythm and pitch characteristics but different
          sound qualities (see the section on <a href="#groups"
          onclick="jumpShow('groups-div')">source sound file groups</a>
          below.)</p>

        <p>More detail can be found on the <code>sndfile-palette</code> class
          itself in its <a href="../robodoc/sndfile-palette_lsp.html">source
          code documentation</a>. Each of the sound files named within the
          palette are used by <em>slippery chicken</em> to
          create <code>sndfile</code> objects. More detail on
          the <code>sndfile</code> class can be found
          in <a href="../robodoc/sndfile_lsp.html">its robodoc page</a>.</p>

        <p class="close"><a href="#" id="pal-div-hide" class="hideLink"
              onclick="showHide('pal-div');return false;">close</a></p>
      </div>

      <h3 id="call"><a href="#call" id="call-div-show"
                       onclick="showHide('call-div');return false;">+</a> 
        The call to clm-play</h3>
      <div id="call-div" class="more">
        <p>In its most straightforward form,
          the <a href="../robodoc/slippery-chicken_lsp.html#slippery2dchicken2fclm2dplay"><code>clm-play</code></a>
          method takes as its arguments a <code>slippery-chicken</code> object
          (which can be passed as a local variable or as the global
          variable defined as the first argument to
          the <code>make-slippery-chicken</code> function), the ID of the
          starting section in that <code>slippery-chicken</code> object on
          which the new sound file is to be based, the IDs of the players
          whose <code>events</code> are to be used as the basis for the new
          sound file, and the ID of the sound file group within
          the <code>sndfile-palette</code> whose source sound files are to be
          used to generate the new sound file, e.g.: </p>

        <pre class="source">
(clm-play +sc-object+ 1 '(player-one player-two) 'source-sndfile-grp-1)</pre>

        <p>If instead of a list of player IDs the user sets the third argument
          of the <code>clm-play</code> method to <code>NIL</code>,
          the <code>event</code> data will be drawn from all players in the
          ensemble.</p>

        <pre class="source">
(clm-play +sc-object+ 1 nil 'source-sndfile-grp-1)</pre>

        <p class="close"><a href="#" id="call-div-hide" class="hideLink"
              onclick="showHide('call-div');return false;">close</a></p>
      </div>
      
      <h3 id="what-it-does"><a href="#what-it-does" id="what-it-does-div-show"
                               onclick="showHide('what-it-does-div');return
                               false;">+</a> 
        How it produces the new sound files</h3>
      <div id="what-it-does-div" class="more">
        <p>The <code>clm-play</code> method passes through the specified
          section (or sections, if more than one is indicated;
          see 
          <a href="#other-clmp"
          onclick="jumpShow('other-clmp-div')">below</a>), and for each
          attacked note in the parts of each of the players specified it
          triggers the playback of a source sound file from the specified group
          in the <code>sndfile-palette</code>.</p>

        <h4>Cycles through source sound files</h4>
        <p>The source sound files are triggered in cyclical sequence on a
          note-by-note, sequence-by-sequence, and player-by-player basis,
          following the order of the players as listed in the
          <code>ensemble</code>. Each consecutive attacked (i.e. not tied to)
          note in the given player's part triggers the next source sound file
          from the specified group in the <code>sndfile-palette</code>. By
          default, the method starts at the beginning of the list of source
          sound files in the specified group with each new <a
           href="../robodoc/rthm-seq_lsp.html"><code>rthm-seq</code></a>,
          triggering them in sequence each time, and cycling back to the
          beginning again if all source sound files have been triggered before
          the end of the given <code>rthm-seq</code>. Once all of the notes
          have been processed for one player, the method moves to the next
        player.</p>

        <h6 class="nb">Update to slippery chicken version 1.0.6</h6>

        <p class="nb">As detailed above, by default the sound files in the
        given group are cycled through, one after the other, returning to the
        beginning when the end is reached. There is no fundamental change in
        1.0.6, but the following functionality has been added: The circular
        selection can be overridden by passing a function to clm-play via the
        keyword <code>:snd-selector</code>. This function must take three
        arguments: the <code>circular-sclist</code> object that contains the
        group's <code>sndfile</code> objects (the sound files are in a simple
        list in the data slot); the <code>pitch</code> of the current
        <code>event</code> (if this happens to be a chord, then each pitch of
        the chord will be handled separately i.e. the
        <code>:snd-selector</code> function will be called for each pitch); and
        the <code>event</code> object. Of course any of these arguments may be
        ignored by the <code>:snd-selector</code> function; indeed it is
        imagined that the event object will be mostly ignored in favour of the
        pitch object, but it is nevertheless passed for completeness. For
        example, the following function--declared on-the-fly using
        <code>lambda</code> rather than separately with
        <code>defun</code>--makes <code>clm-play</code> act as a traditional
        sampler would: Assuming our <code>sndfile-palette</code> group has a
        list of sound files whose frequencies correspond to their perceived
        fundamentals (e.g. see the <code>set-frequency-from-filename</code>
        method, and the <code>kontakt-to-sfp</code> function) we choose the
        nearest sound file in the group to the frequency of the current event's
        pitch:

        <pre class="source">
           :snd-selector #'(lambda (sflist pitch event)
                             (declare (ignore event))
                             (get-nearest-by-freq
                              (frequency pitch) (data sflist)))
</pre>

        <h4>Omits initial rests</h4>
        <p>The <code>clm-play</code> method begins its output with the first
          attacked note in the specified sequence. Thus, if the first event of
          the given sequence is an attacked note, the new sound file will be
          exactly rhythmically synchronous with the parts of the specified
          players. This is especially audible if the source sound files are
          percussive in nature. (This synchronicity can be obscured, if
          desired, by methods such as setting the <code>inc-start</code> etc.,
          as described
          <a href="#start-end-dur"
          onclick="jumpShow('start-end-dur-div')">below</a>.)</p> 

        <p>If the specified sequence begins with one or more rests, the method
          will ignore those rests, and the new sound file will begin with the
          first attacked event at 0.0 seconds. The resulting sound file in such
          cases will therefore be rhythmically synchronous to the given
          players' parts, but with a minor offset at the beginning.</p>

        <h4>Simple playback</h4>
        <p>The <code>clm-play</code> method does not process the source sound
          files it is given by any means other than shifting their pitch,
          assembling a sequence of sound files or file fragments for playback,
          and distributing the individual sound files or fragments amongst the
          channels for spatialized playback. There is no synthesis or filtering
          involved.</p>

        <p class="close"><a href="#" id="what-it-does-div-hide" class="hideLink"
              onclick="showHide('what-it-does-div');return
              false;">close</a></p>
      </div>

      <h3 id="start-end-dur"><a href="#start-end-dur"
                                id="start-end-dur-div-show"
                                onclick="showHide('start-end-dur-div');return 
                                         false;">+</a> 
        Start times, end times, and durations</h3>
      <div id="start-end-dur-div" class="more">
        <p>Unless otherwise indicated, the <code>clm-play</code> method
          triggers the source sound files from their beginning and continues
          playback of the same source sound file until the next attacked note
          in the given player's part, ignoring rests. By default, if the given
          source sound file is longer than the duration between two attacked
          notes, playback of the source sound file will be interrupted at the
          next attacked note. If the source sound file is shorter than the
          duration between two attacked notes, it will play out in full.</p>

        <p>Three optional keyword arguments are available to
          the <code>clm-play</code> method to modify this default behavior,
          namely <code>:inc-start</code>, <code>:duration-scaler</code>,
          and <code>:ignore-rests</code>. Three additional keyword arguments
          can be specified within the <code>sndfile-palette</code> that have a
          related effect, namely <code>:start</code>, <code>:end</code>,
          and <code>:duration</code>.</p>

        <h4>clm-play arguments for start times, end times, and durations</h4>
        <p>If the <code>:inc-start</code> argument is set to <code>T</code>,
          the <code>clm-play</code> method will automatically start playback of
          each source sound file from an increasingly later point in that file
          each time the file is triggered. The increment interval is
          auto-calculated, so that it reaches the end of the input sound file
          by the last time it is triggered. The <code>:inc-start</code>
          argument is set to <code>NIL</code> by default. </p>

        <p>The <code>:duration-scaler</code> argument
          causes <code>clm-play</code> to scale the duration of each source
          sound file segment by a specified factor. If the argument is given a
          value less than <code>1.0</code>, the segments played back will
          end <em>before</em> the next attacked note, and if it is set to a
          value greater than <code>1.0</code>, the playback of the segments
          will not end until <em>after</em> the next attacked note (should they
          be long enough), causing the segments to overlap. Overlapping
          segments will only be generated for events within the same sequence,
          but will not overlap from one sequence to the
          next. The <code>:duration-scaler</code> argument only affects the
          duration of the segment played back; it does not alter pitch or
          implement time-stretching. This argument is set to <code>1.0</code>
          by default.</p>

        <p>If the <code>:ignore-rests</code> argument is set
          to <code>NIL</code>, the <code>clm-play</code> method will mute
          playback of the source sound file segments at points that correspond
          with rests in the given player's part. This argument is set
          to <code>T</code> by default. Similar to
          the <code>:duration-scaler</code>, ignoring rests only has an effect
          within the same sequence. All sounds will end at the end of a
          sequence, even if the next sequence begins with rests.</p>

        <pre class="source">
(clm-play +sc-object+ 1 'player-one 'source-sndfile-grp-1 
          :inc-start t
          :duration-scaler 1.3
          :ignore-rests nil)</pre>

        <h4>Specifying start and end times within the sndfile-palette</h4>
        <p>The user can indicate that only a specified segment of a given
          source sound file is to be played back using the <code>:start</code>
          and <code>:end</code> or <code>:duration</code> keyword arguments
          within the <code>sndfile-palette</code>. These arguments correspond
          to the identically named slots of
          the <a href="../robodoc/sndfile_lsp.html"><code>sndfile</code></a>
          class. Each of these arguments takes either a single numerical value
          consisting of time in seconds, or a list of numbers indicating 
          <code>(mins secs millisecs)</code>.</p>

        <p>The same source sound file can be listed in
          the <code>sndfile-palette</code> multiple times with
          different <code>:start</code> and <code>:end</code>
          or <code>:duration</code> times (or with the same values to get a
          repeat). This has the same effect as listing multiple separate source
          sound files, as the <code>clm-play</code> method will cycle through
          these in the same manner by which it cycles through separate sound
          files.</p>

        <p>The <code>:duration</code> argument automatically determines the end
          time of the given segment by adding the specified number of seconds
          to the start time. The user should apply <em>either</em>
          the <code>:end</code> <em>or</em> <code>:duration</code> argument to
          a given source sound file, but <em>not both</em>.</p>

        <p>If a <code>:start</code> time is indicated with no <code>:end</code>
          or <code>:duration</code> time, the end time will default to the end
          of the source sound file. Correspondingly, if only
          an <code>:end</code> or the <code>:duration</code> time is
          specified, the segment will begin playback at the beginning of the
          source sound file.</p>

        <pre class="source">
:sndfile-palette '(((sustained-pads-group
                     ((source-sndfile-1 :start 0.000 :end 2.308)
                      (source-sndfile-1 :start 2.274 :duration 0.1)
                      (source-sndfile-1 :start (0 4 748))
                      (source-sndfile-1 :end 7.255)
                      (source-sndfile-1 :duration 2.1))))
                   ("/path/to/source-sndfiles/")
                   ("aif"))</pre>

        <p class="nb">NB: The <code>:duration</code> argument within
          the <code>sndfile-palette</code> is only used to demarcate a segment
          within a source sound file; the actual duration played back will be
          decided by the rhythms of the corresponding player part and the
          values of the <code>:duration-scaler</code>
          and <code>:ignore-rests</code> arguments. </p>

        <p class="close"><a href="#" id="start-end-dur-div-hide" class="hideLink"
              onclick="showHide('start-end-dur-div');return
              false;">close</a></p>
      </div>

      <h3 id="freq"><a href="#freq" id="freq-div-show"
                       onclick="showHide('freq-div');return false;">+</a> 
        Base frequency</h3>
      <div id="freq-div" class="more">
        <p><em>slippery chicken</em> has two options for influencing the speed
          (transposition via sample-rate conversion) at which it plays back the
          various source sound files. Both of these options make use of
          the <code>frequency</code> slot when determining these
          speeds. </p>

        <p>Some sounds have a prominent fundamental pitch that can be used as a
          reference for transposition. Setting the
          <code>frequency</code> slot to this fundamental pitch, either in the
          form of a number in Hertz or a note-name symbol, will determine the
          sample-rate conversion factor when transposing. If no pitch is
          specified for the <code>frequency</code> slot, the value defaults
          to <code>C4</code>.</p>

        <p>The <code>frequency</code> value can be defined for each source
          sound file within the <code>sndfile-palette</code>.</p>

        <pre class="source">
:sndfile-palette '(((percussive-models-group
                     ((source-sndfile-1 :start 0.000 :end 2.308)
                      (source-sndfile-1 :start 2.274 :duration 0.1 
                                                     :frequency 524)
                      (source-sndfile-1 :start 4.748 :frequency c3)
                      (source-sndfile-1 :end 7.255 :frequency c5)
                      (source-sndfile-1 :duration 2.1 frequency d4))))
                   ("/path/to/source-sndfiles/")
                   ("aif"))</pre>

        <h4>Non-pitch-synchronous transposition</h4>
        <p>The first option available to the user regarding transposition,
          which is <em>slippery chicken's</em> default behavior, is to
          determine the sample-rate conversion based on the pitches of the
          current set. In this option, <em>slippery chicken</em> will not
          attempt to match the transpositions of the source sound files to the
          exact pitches in the parts of the given players. It will still,
          however, use the <code>:note-number</code> argument to access chord
          notes from the bottom up.</p>

        <h4>Pitch-synchronous transposition</h4>
        <p>In the second option, <em>slippery chicken</em> scales the playback
          speed of the source sound files to match the specific pitches of the
          given players' parts. The pitches in the resulting output file will
          only match those of the players' parts if the source sound file has a
          perceptible fundamental pitch and this has been defined accurately
          within the <code>sndfile-palette</code> using
          the <code>frequency</code> slot. This option will also result in
          chords from the players' parts being reflected in the sound file
          output. </p>

        <p>This second option will only be applied if
          the <code>:pitch-synchronous</code> argument of
          the <code>clm-play</code> method is set to <code>T</code>.</p>

        <pre class="source">
(clm-play +sc-object+ 1 'flt 'source-sndfile-grp-1
          :pitch-synchronous t)</pre>

        <h4>Specifying a frequency for sounds with no fundamental</h4>
        <p>The <code>frequency</code> slot can also be an effective tool for
          source sound files with no perceptible fundamental pitch. In general,
          setting a higher <code>frequency</code> value will cause the source
          sound file to be played back at a lower pitch, while setting it lower
          will cause the source sound file to play back higher. </p>

        <h4>Both pitch and duration are affected</h4>
        <p>Transposition by sample-rate conversion is a time-domain process, so
          as with changing the speed of a tape recorder or turntable, both
          pitch and timing of events is altered.</p>

        <p class="close"><a href="#" id="freq-div-hide" class="hideLink"
              onclick="showHide('freq-div');return false;">close</a></p>
      </div>

      <h3 id="groups"><a href="#groups" id="groups-div-show"
                         onclick="showHide('groups-div');return false;">+</a>
        Source sound file groups</h3>
      <div id="groups-div" class="more">
        <p>The <code>sndfile-palette</code> definition can consist of multiple
          groups of source sound files. As described above,
          the <code>clm-play</code> method is designed to only utilize one of
          these groups for any given output file, with the exception of the
          fibonacci-transition option described in the next section. The
          approach of calling the <code>clm-play</code> method several times,
          specifying a different source sound file group for each call, is
          demonstrated here.</p>
        
        <pre class="source">
(clm-play +sc-object+ 1 '(player-one player-two) 'source-sndfile-grp-1
          :duration-scaler 0.7
          :inc-start nil)
(clm-play +sc-object+ 1 '(player-one player-two) 'source-sndfile-grp-2
          :duration-scaler 1.3
          :inc-start t)
(clm-play +sc-object+ 1 '(player-three) 'source-sndfile-grp-3
          :ignore-rests nil)</pre>

        <p>The resulting sound files can then be combined and mixed using a
          third-party digital audio workstation, such
          as <a href="http://www.apple.com/logicpro/">Logic</a>, <a href="http://www.steinberg.net/en/products/cubase">Cubase</a>,
          or the open-source
          alternative <a href="http://ardour.org">Ardour</a>.</p>
        
        <h4>Fibonacci-transitioning between two sound file groups</h4>
        <p>The one native option that <em>slippery chicken</em> has available
          for incorporating more than sound file group into the same output
          file consists of
          a <a href="../robodoc/l-for-lookup_lsp.html#l2dfor2dlookup2ffibonacci2dtransition"><code>fibonacci-transition</code></a>
          between two groups in the same sndfile-palette. This is done by
          specifying the first group as usual and the second group as the value
          of the optional keyword
          argument <code>:sound-file-palette-ref2</code>.</p>

        <pre class="source">
(clm-play +sc-object+ 1 '(player-one player-two) 'source-sndfile-grp-1  
          :sound-file-palette-ref2 'source-sndfile-grp-2)</pre>

        <p class="close"><a href="#" id="groups-div-hide" class="hideLink"
              onclick="showHide('groups-div');return false;">close</a></p>
      </div>
      
      <h3 id="other-sf"><a href="#other-sf" id="other-sf-div-show"
                           onclick="showHide('other-sf-div');return
                                    false;">+</a> 
        Other useful sndfile class slots</h3>
      <div id="other-sf-div" class="more">
        <p>Two other useful slots of the <code>sndfile</code> class that can be
          given values within the <code>sndfile-palette</code>
          are <code>amplitude</code> and <code>description</code>. </p>

        <h4>amplitude</h4>
        <p>The <code>amplitude</code> slot sets the relative amplitude of the
          given source sound files (or segments of the same source file if
          using <code>:start</code> and <code>:end</code> or
          <code>:duration</code>). Since <code>clm-play</code> by default
          instructs CLM to normalize the new sound file to just below the
          highest sample value, this argument can take a number of any
          arbitrary value, and the amplitudes will be scaled accordingly. </p>

        <h4>description</h4>
        <p>The <code>description</code> slot allows the user to add a comment
          about the given source sound file or segment defined. This value is
          not used for any purposes other than information.</p>


        <pre class="source">
:sndfile-palette '(((percussive-models-group
                     ((source-sndfile-1
                       :description "initial attack"
                       :start 0.000 :end 2.308 :frequency 524 
                       :amplitude 0.1) 
                      (source-sndfile-1
                       :description "snap"
                       :start 2.274 :duration 0.1 :frequency e4 
                       :amplitude 1.0))))
                   ("/path/to/source-sndfiles/")
                   ("aif"))</pre>

        <p class="close"><a href="#" id="other-sf-div-hide" class="hideLink"
              onclick="showHide('other-sf-div');return false;">close</a></p>
      </div>

      <h3 id="other-clmp"><a href="#other-clmp" id="other-clmp-div-show"
                             onclick="showHide('other-clmp-div');return
                             false;">+</a> 
        Other useful clm-play arguments</h3>
      <div id="other-clmp-div" class="more">
        <p>The <code>clm-play</code> method takes 4 mandatory arguments and has
          36 optional keyword arguments. A description of each of these
          arguments can be found in the source code documentation for
          <a href="../robodoc/slippery-chicken_lsp.html#slippery2dchicken2fclm2dplay"><code>clm-play</code></a>. A
          number of the more frequently used optional keyword arguments are
          given here in brief.</p>

        <ul>
          <li><code>num-sections</code>: This argument takes an integer that
            indicates the total number of consecutive sections on which the new
            sound file is to be based, including the first section indicated as
            the second mandatory argument. If the piece has sub-sections, these
            will be included in the total; i.e., if section 1 has 3 subsections
            and <code>:num-sections</code> is 2, we'll generate data from the
            first two subsections of section 1, not all subsections of main
            sections 1 and 2. If this argument is set to <code>NIL</code>, all
            sections in the piece will be used. Default = <code>NIL</code>.
        
            <pre class="source">
(clm-play +sc-object+ 1 nil 'source-sndfile-grp-1 :num-sections 2)</pre></li>

          <li><code>from-sequence</code> and <code>num-sequences</code>: These
            two arguments take numbers that indicate the
            first <code>rthm-seq</code> and total number of
             <code>rthm-seqs</code> within the specified section on which the
            new sound file will be based. As these arguments only function
            within one section, the <code>num-sections</code> argument must be
            set to <code>1</code>. 

            <pre class="source">
(clm-play +sc-object+ 1 nil 'source-sndfile-grp-2 
          :num-sections 1
          :from-sequence 2
          :num-sequences 2)</pre></li>

          <li><code>reset-snds-each-rs</code>
            and <code>reset-snds-each-player</code>: By
            default, <em>slippery chicken</em> starts at the beginning of each
            list of source sound files with each new <code>rthm-seq</code> and
            each new player it processes. This behavior can be changed by
            setting one or both of these arguments to <code>NIL</code>.

            <pre class="source">
(clm-play +sc-object+ 2 nil 'source-sndfile-grp-1
          :reset-snds-each-rs nil
          :reset-snds-each-player nil)</pre></li>

          <li><code>time-scaler</code>: The <code>time-scaler</code> argument
            takes a number that is the factor by which the durations of the
            segments in the new sound file will be scaled. The resulting sound
            file will have the same rhythmic structure as the players' parts on
            which it is based but at a different tempo. Use of this argument
            only affects durations; it does not apply pitch-shifting or
            time-stretching. The resulting sound file will no longer be
            synchronous with the events of the
            given <code>slippery-chicken</code> object.

            <pre class="source">
(clm-play +sc-object+ 2 nil 'source-sndfile-grp-2 :time-scaler 1.7)</pre></li>

          <li><code>src-scaler</code>: The <code>src-scaler</code> value will
            scale the playback speed of all <em>individual</em> sound file
            segments being written to the new sound file by the specified
            factor. This argument does not affect durations or apply
            time-stretching, nor does it modify the playback speed or duration
            of the new sound file as a whole.

            <pre class="source">
(clm-play +sc-object+ 3 nil 'source-sndfile-grp-1 :src-scaler 1.9)</pre></li>

          <li><code>rev-amt</code>: The
            <code>rev-amt</code> value indicates how much digital reverberation
            is to be applied to the output file. The <code>clm-play</code>
            method uses the <code>nrev</code> reverb instrument, for which a
            value of <code>0.1</code> is relatively high.

            <pre class="source">
(clm-play +sc-object+ 3 nil 'source-sndfile-grp-2 :rev-amt 0.1)</pre></li>
        </ul>

        <p class="close"><a href="#" id="other-clmp-div-hide" class="hideLink"
              onclick="showHide('other-clmp-div');return false;">close</a></p>
      </div>
      
      <h3 id="out-args"><a href="#out-args" id="out-args-div-show" 
                           onclick="showHide('out-args-div');return
                                    false;">+</a> 
        clm-play arguments for output format</h3>
      <div id="out-args-div" class="more">
        <p>The <code>clm-play</code> method produces stereo sound files by
          default, with the header type, data format, and sample rate that are
          stored in CLM's
          global <code>*clm-header-type*</code>, <code>*clm-data-format*</code>,
          and <code>*clm-srate*</code> variables. CLM's default data format and
          sample rate are <code>16 bit signed integer</code>
          and <code>44100</code> kHz. The default header-type is dependent on
          the user's operating system. <em>slippery chicken</em> will
          automatically attach the sound file extension it determines to be
          best suited to the header type, though this parameter too can be
          specified by the user. </p>

        <p>These attributes can be specified by providing values for the
          following keyword arguments:</p>
      
        <ul>
          <li><code>channels</code>: The number of interleaved channels in the
            output file. The <code>clm-play</code> method will automatically
            distribute the source sound material across the channels in a
            manner reflecting a linear periphery of consecutively numbered
            loudspeakers. The number of output channels is only limited by the
            sound file output format used.</li>
          <li><code>srate</code>: The sample rate of the new output file.</li>
          <li><code>header-type:</code> The value given here is used to set
            CLM's global <code>*clm-header-type*</code> variable and must be
            preceded by the <code>clm::</code> package qualifier. Setting this
            to <code>clm::mus-riff</code> will produce files
            in <code>.wav</code> format; <code>clm::mus-aiff</code> will
            produce <code>.aiff</code> files.</li>

            <li><code>data-format</code>: The value given here is used to set
            CLM's global <code>*clm-data-format*</code> variable and must be
            preceded by the <code>clm::</code> package qualifier. Setting this
            to <code>clm::mus-lfloat</code> will produce audio files with a
            format of 32-bit little-endian floating-point. Setting it
            to <code>clm::mus-l24int</code> produces little-endian 24-bit
            integer files. <code>clm::mus-bshort</code> will produce 16-bit
            big-endian files, and
            <code>clm::mus-bfloat</code> will produce 32-bit floating-point
            big-endian files. NB: AIFF and AIFC files are not compatible with
            little endian formats.</li>

            <li><code>sndfile-extension</code>: The extension to be added to
            the new output file. If <code>NIL</code>, <em>slippery chicken</em>
            will automatically attach the extension that it determines to be
            best suited to the header type. <em>NB: The extension does not
            determine the output sound file format; <code>header-type</code>
            does that.</em> </li> </ul>

        <pre class="source">
(clm-play +sc-object+ 1 nil 'source-sndfile-grp-1 
          :channels 8
          :srate 44100
          :header-type clm::mus-aiff
          :data-format clm::mus-bshort
          :sndfile-extension ".aiff")</pre>

        <p class="close"><a href="#" id="out-args-div-hide" class="hideLink"
              onclick="showHide('out-args-div');return false;">close</a></p>
      </div>

      <h3 id="own-part"><a href="#own-part" id="own-part-div-show"
                           onclick="showHide('own-part-div');return
                           false;">+</a> 
        Tape parts with independent rhythmic structures</h3>
      <div id="own-part-div" class="more">
        <p>Since <code>clm-play</code> creates its output files based on the
          <code>events</code> of one or more players in
          the <code>ensemble</code>, if the user wishes to create an output
          file that is not synchronous in rhythmic structure to any of the
          instrumental parts, or if the user would like to create an
          electroacoustic composition with no instrumental players, "silent"
          computer-part players can be added to the <code>ensemble</code>. A
          corresponding <code>computer</code> instrument exists for this
          purpose in
          the <code>+slippery-chicken-standard-instrument-palette+</code>.</p>

        <p>Specific <code>rthm-seq</code> IDs can then be given for these
          players in the <code>rthm-seq-map</code>, and these "silent" players
          can be passed as the <code>player</code> argument to
          the <code>clm-play</code> method to generate the desired tape
          part.</p>

        <p>As the <code>computer</code> instrument is defined to encompass the
          full MIDI pitch range (C-1 to G9), the use
          of <code>set-limits-high</code> and <code>-low</code> may be
          recommended for limiting transposition registers.</p>

        <p>Adding a computer part to the <code>ensemble</code>:</p>

        <pre class="source">
:ensemble '(((fl (flute :midi-channel 1))
             (ob (oboe :midi-channel 2))
             (cl (b-flat-clarinet :midi-channel 3))
             (cp (computer))))</pre>

        <p>Limiting transposition register:</p>

        <pre class="source">
:set-limits-high '((cp (0 c6 100 c6)))
:set-limits-low '((cp (0 f3 100 f3)))</pre>

        <p>Defining a separate rhythmic structure for the computer part within
          the <code>rthm-seq-map</code>:</p>

        <pre class="source">
:rthm-seq-map '((1 ((fl (1 2 3 1 3 2))
                    (ob (2 3 1 3 2 1))
                    (cl (3 1 3 2 1 2))
                    (cp (1 3 2 1 2 3)))))</pre>

        <p>Calling <code>clm-play</code> for just the <code>rhtm-seq-map</code>
          data of the <code>cp</code> part:</p>

        <pre class="source">
(clm-play +sc-object+ 1 'cp 'source-sndfile-grp-1)</pre>

        <h4>Excluding computer players from the score and MIDI</h4>
        <p>If this approach is chosen, the "silent" players of the ensemble can
           then be excluded from the MIDI output by
           specifying <code>voices</code> to the <code>midi-play</code> method,
           and excluded from printable score output by
           calling <code>cmn-display</code>
           or <code>write-lp-data-for-all</code> with the <code>players</code>
           argument.</p>

        <p>Specifying only a selection of the players for
          the <code>midi-play</code> method (excluding the computer
          player):</p>

        <pre class="source">
(midi-play +sc-object+ :voices '(fl ob cl) :midi-file "/tmp/output.mid") </pre>

        <p>Specifying only a selection of the players for
          the <code>cmn-display</code> and <code>write-lp-data-for-all</code>
          methods (excluding the computer player): </p>

        <pre class="source">
(cmn-display +sc-object+ :players '(fl ob cl) :file "/tmp/output.eps")

(write-lp-data-for-all +sc-object+ :players '(fl ob cl) :base-path "/tmp/")</pre>

        <p class="close"><a href="#" id="own-ins-div-hide" class="hideLink"
              onclick="showHide('own-ins-div');return false;">close</a></p>
      </div>

            <h3 id="own-ins"><a href="#own-ins" id="own-ins-div-show"
                           onclick="showHide('own-ins-div');return
                           false;">+</a> 
      User-defined CLM instruments with clm-play</h3>
      <div id="own-ins-div" class="more">

        <p>Instead of using the default CLM <code>samp5</code> instrument, the
        user can have their own instrument (or slippery chicken's simple sine
        instrument) called for them by <code>clm-play</code> by providing the
        instrument name as a function to <code>clm-play</code>'s :clm-ins
        keyword argument. (Remember that your CLM instrument will most
        probably be in the CLM package so you'll need the clm:: package
        qualifer, e.g. <code>#'clm::my-clm-instrument</code>.)
        </p>

        <p> The instrument passed must accept all the required and keyword
        arguments of samp5 (see src/samp5.lsp or more simply src/sine.lsp for a
        list of these) but can of course choose to ignore them.  Any further
        arguments you would like to pass to your instrument can be given in
        <code>:clm-ins-args</code>. This should be a list of keyword arguments
        and values to pass to each CLM instrument call
        e.g. <code>'(:cutoff-freq 2000 :q .6)</code> or a function which
        takes two arguments (the current event and the event number) and
        returns a list of keyword arguments and their values, perhaps based on
        the event data.

                <pre class="source">
(clm-play mini 1 nil nil :num-sections 3 :play nil :check-overwrite nil
          :clm-ins #'clm::sine
          :clm-ins-args '(:unused-arg-for-testing t))

(clm-play mini 2 nil nil :num-sections 3 :play nil :check-overwrite nil
          :clm-ins #'clm::sine
          :clm-ins-args #'(lambda (event event-num)
                            (print-simple event) ; current event object
                            (print event-num)    ; current event number
                            (list :my-ins-keyword-arg1 'foo
                                  :my-ins-keyword-arg2 'bar )))
        </pre>


        </p></div>

      <!-- **************************************************************** --> 
      <!-- This spacer <br> is necessary as a buffer between the content and
        the footer. It cannot be added as padding to #push, since #push has to
        be the same size as #footer in order for the dynamic placement to work
        properly --> 
      <br /><br />
      <div id="push"></div>
    </div>
    <script type="text/javascript">footer();</script>
    <noscript>Your browser does not support JavaScript!</noscript>
  </body>
</html>
