<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>slippery chicken documentation - pitches</title>
    <!-- change the following two file paths to be ../ if in a subdirectory -->
    <link href="../sc-stylesheet.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="../head-foot.js"></script>
    <script language="javascript" type="text/javascript"
            src="../show-hide.js"></script>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  </head>
  
  <body onload="showHide(window.location.hash.substring(1)+'-div')" >
    <div id="content">
      <!-- files in the doc directory will call header with argument "./" but
           those in subdirectories will need "../" -->
      <script type="text/javascript">header("../");</script>
      <noscript>Your browser does not support JavaScript!</noscript>
      <!-- **************************************************************** -->
      
      <h2>Pitches</h2>

      <h3 id="files"><a href="#files" id="files-div-show"
                        onclick="showHide('files-div');return false;">+</a>
        Associated example files</h3>
      <div id="files-div" class="more">
        <ul>
          <li><a href="../examples/pitches-examples.lsp">pitches-examples.lsp</a></li>  
        </ul>
        <p class="close"><a href="#" id="files-div-hide" class="hideLink"
                            onclick="showHide('files-div');return
                            false;">close</a></p> 
        <br />
      </div>

      <p>Pitches in <em>slippery chicken</em> are governed by a combination of
        general guidelines determined by the user and an internal, automatic
        pitch-selection algorithm that assigns specific pitches to players
        based on these guidelines.</p>

      <p>The user's direct control over pitch content lies primarily in the
        definition of a palette of available pitch collections (<em>sets</em>
        within the <code>set-palette</code>), a map of when these sets are used
        within the piece (<code>set-map</code>), and palettes of linear pitch
        <em>contours</em> (<code>pitch-seq</code> objects within
        a <code>pitch-seq-palette</code>) that are defined for each
        individual <code>rthm-seq</code> object in
        the <code>rthm-seq-palette</code>.</p>

      <p>A number of other optional keyword arguments to
        the <code>make-slippery-chicken</code> function (which also correspond
        to slots of the <code>slippery-chicken</code> class) allow for further
        general control of pitch content, such as <code>set-limits-high</code>
        and <code>set-limits-low</code>, <code>fast-leap-threshold</code>,
        <code>avoid-melodic-octaves</code> etc. The full list of available
        arguments can be found in the source code documentation for
        the <a href="../robodoc/slippery-chicken_lsp.html#slippery2dchicken2fmake2dslippery2dchicken">make-slippery-chicken</a>
        function. </p> 

      <p>This page provides information on set-related features and the use
        of <code>pitch-seq</code> objects and
        <code>pitch-seq-palettes</code>. It also provides an introduction to
        the automatic pitch-selection algorithm that <em>slippery chicken</em>
        uses internally for actual pitch placement. Separate documentation is
        also available for <a href="./notenames-scales.html">note-names and
        scales</a> and <a href="./chords.html">chord functions</a>.</p>

      <h3>set basics</h3> 
      <h4 id="set-palettes"><a href="#set-palettes" id="set-palettes-div-show"
                               onclick="showHide('set-palettes-div');return
                                        false;">+</a>
        set-palette</h4>
      <div id="set-palettes-div" class="more">
        <p>The user defines all of the possible sets of pitches for a
          composition in the <code>set-palette</code>.  Any number of sets can
          be defined in any order within this palette. Each set is assigned an
          ID, which can be a number, a symbol, or a string, with which it is
          later referenced from within the <code>set-map</code>. The pitches of
          a given set will be the only pitches available to all players of the
          ensemble in any sequence of the <code>set-map</code> that is assigned
          that set. Note that it is not necesssary to repeat the octave if it
          hasn't changed from the previous note</p>

        <pre class="source">
:set-palette '((set1 ((c3 g cs4 e fs a bf c5 d f gf af ef6)))
               (set2 ((c3 fs cs4 e g a b c5 df f g af ef6)))
               (set3 ((d3 f cs4 e fs a b c5 d e fs af ef6)))
               (set4 ((d3 e cs4 ef fs a b c5 d e fs af d6))))</pre> 

        <!-- for a 150ppi CMN png fragment scale width by .6 -->
        <table class="image">
          <tr><td><img class="fragment" src="./resources/pitches-set-pals.png"
                       alt="pitches-set-pals" width="410" /></td></tr>
          <caption>NB: This graphic was created by applying
            the <code>cmn-display</code> method directly to a
            <code>set-palette</code> object. See the page
            on <a href="./output.html#cmn-frags">output</a> for more detail on
            this feature.</caption>
        </table>

        <p>The combination of the static <code>set-palette</code> material and
          the curves defined in the <code>pitch-seq-palette</code> of each
          given <code>rthm-seq</code> will determine the linear pitch
          attributes of the music generated for each instrument. If a set
          contains only a few pitches separated by large intervals, the players
          will have either large leaps in their linear pitch material or many
          consecutive repetitions of the same note. </p>

        <p class="nb">NB: Because <em>slippery chicken</em> interprets many
          two-item lists as nested lists, it will issue an error if the user
          attempts to create a set with only two pitches. To get around this
          error, the user may specify the keyword
          argument <code>:recurse-simple-data</code> with the
          value <code>nil</code> with two-pitch sets, e.g.:</p>
        
        <pre class="source">
:set-palette '(((1 ((gs4 bf4)))) :recurse-simple-data nil)</pre>

        <p class="close"><a href="#" id="set-palettes-div-hide" class="hideLink"
              onclick="showHide('set-palettes-div');return
              false;">close</a></p>
      </div>

      <h4 id="set-maps"><a href="#set-maps" id="set-maps-div-show"
                           onclick="showHide('set-maps-div');return
                           false;">+</a> 
        set-map</h4> <div id="set-maps-div" class="more">
        <p>The <code>set-map</code> is where the sets are assigned to each of
          the individual sequences of the piece. It is made up of a list of the
          sections in the piece, each paired with a list that consists of one
          set ID for each of the sequences in that section.</p> 

        <p>The set IDs can be assigned to the sequences in any order. They can
          be repeated within the <code>set-map</code> as many times as the user
          would like. Not all of the sets defined must be used in
          the <code>set-map</code>. There must be the same number of sequences
          in each section of the <code>set-map</code> as there are sequences in
          each section of the <code>rthm-seq-map</code>.</p>

          <p>The pitches in a given set are the only pitches
          available to the ensemble for the duration of that sequence.</p>

        <pre class="source">
:set-map '((1 (set1 set1 set1 set1 set1))
           (2 (set2 set3 set2 set3 set2 set3 set3))
           (3 (set3 set3 set4 set3 set4 set3 set4 set4 set3 set4 set4))   
           (4 (set4 set4 set1 set4 set1 set4 set1 set1 set1)))</pre> 

        <p>This <code>set-map</code>, with the sets
          defined in the <code>set-palette</code> section above, will result
          in the following progression:</p>

        <!-- for full-system width examples set width to 800 -->
        <table class="image">
          <tr><td><img class="fragment"
                       src="./resources/pitches-set-map-a-b-c.png"
                       alt="pitches-set-map-a-b-c" width="800" /></td></tr>
        
          <caption>NB: This example has one set per measure
            because the individual <code>rthm-seq</code> objects in the
            given <code>rthm-seq-palette</code> are each only one measure
            long. Each set applies to an
            entire <code>rthm-seq</code>, which may consist of multiple
            measures.<br /><br />
          
            NB: This example graphic was created by setting
            the <code>display-sets</code> keyword argument
            of <code>cmn-display</code> to <code>T</code> when applied to a
            complete <code>slippery-chicken</code> object (see the page
            on <a href="./output.html#cmn-sets">output</a> for more detail),
            with further tweaking of the output using the open source software
            Inkscape and GIMP.</caption>
                     </table>

             <p>As of version 1.07 a <code>morph</code> method exists for the
                     chord class (of which sets are a subclass). This means that
                     set-maps generated with, e.g., <a
                     href="fibonacci.html#trans-div">fibonacci-transitions</a>
                     which return <code>morph</code> structures instead of plain
                     references, will morph two sets before using them in the
                     assignment of pitches to instruments.  See <a
                     href="../robodoc/chord_lsp.html#chord2fmorph">robodoc</a>
                     for more information.</p>

             <p>As of version 1.09  there is a new <code>slippery-chicken</code>
             class slot (and corresponding <code>make-slippery-chicken</code>
             keyword argument), <code>:transposition-curve</code>, that over the
             course of a whole piece describes a transposition that should be
             applied to the sets used for the pitch selection routine. The
             x-axis can have any arbitrary range: it will automatically be
             stretched to match the number of sequences in the piece. The y-axis
             should be semitone values; these may be positive or negative of
             course. Interpolation will take place between y values, but
             transposition will round to the nearest pitch in the current
             scale. The default value for this curve is '(0 0 100 0) which means
             of course no transposition will be applied.


        <p class="close"><a href="#" id="set-maps-div-hide" class="hideLink"
              onclick="showHide('set-maps-div');return false;">close</a></p>
      </div>
      
      <h3>pitch-seq basics</h3>
      <h4 id="curves"><a href="#curves" id="curves-div-show"
                         onclick="showHide('curves-div');return false;">+</a>
        Understanding pitch-seq curves</h4>
      <div id="curves-div" class="more">
        <p><em>slippery chicken</em> automatically selects pitches from each
          set of the <code>set-map</code> for each player in each sequence. The
          linear contours of the pitches chosen for each player are governed
          by <code>pitch-seq</code> curves. These are defined by the user
          within the <code>pitch-seq-palette</code> of each
          individual <code>rthm-seq</code> object of
          the <code>rthm-seq-palette</code>, and are therefore only applied to
          instances of that <code>rthm-seq</code> in the music generated.</p>

        <p>The <code>pitch-seq</code> curves consist of numbers (both integers
          and decimal numbers work), one for each
          attacked rhythm (i.e. not for tied notes) of the
          given <code>rthm-seq</code> object. For example:</p>

        <pre class="source">
:rthm-seq-palette '((1 ((((4 4) - e e e e - - e e e e -))
                        :pitch-seq-palette ((1 4 3 2 5 7 8 6)))))</pre>

        <h5>Direction and relative size of intervals</h5>
        <p>The numbers chosen by the user for the <code>pitch-seq</code> can
          span any arbitrary numerical range, including negative numbers. The
          difference between two consecutive numbers in
          the <code>pitch-seq</code> indicates the direction and relative size
          of the linear interval between the corresponding two pitches selected
          by <em>slippery chicken</em>. Thus, a sequence of 
          <code>(1 2 13 4 3)</code> indicates a linear pitch contour that has
          one small interval at the beginning and end, with a larger leap
          upwards and back down again in the middle.</p>

        <h5>Actual pitches selected depend on range and other factors</h5>
        <p>The actual pitches chosen from the current set
          by <em>slippery chicken</em> for each curve depend on a number of
          factors (see the section on <a href="#selection"
          onclick="jumpShow('selection-div')">how slippery chicken selects
          pitches</a> below). One of these factors is the given instrument's
          range. Each <code>pitch-seq</code> curve is only applied to those
          pitches within the current set that fall within the
          instrument's range, as defined in the <code>instrument-palette</code>
          being used for the piece. If there are fewer pitches within the
          current set that fall within the instrument's range than
          there are different number values used to define
          the <code>pitch-seq</code> curve, then some of the pitches will be
          repeated.</p>

        <p>As an example, the following application of the
          same <code>pitch-seq</code> with 8 different number to both the
          flute and the bassoon parts, with a pitch set that has
          relatively few low notes, results in the bassoon line having a
          narrower range and a number of repeated pitches:</p>

        <pre class="source">
:set-palette '((1 ((b3 d4 g4 b4 e5 a5 d6 a6 b6))))
:rthm-seq-palette '((1 ((((4 4) - e e e e - - e e e e -))
                        :pitch-seq-palette ((1 2 3 4 5 6 7 8)))))
:rthm-seq-map '((1 ((fl (1))
                    (bn (1)))))</pre>

        <table class="image">
          <!-- for 150ppi LP png fragment examples scale by .75 -->
          <tr><td><img class="fragment"
                       src="./resources/pitches-single-pitch-seq.png"
                       alt="pitches-single-pitch-seq.png"
                       width="260"/></td></tr> 
        </table>

        <h5>Defining only one pitch-seq in a pitch-seq-palette</h5>
        <p>If only one <code>pitch-seq</code> is defined for a
          given <code>rthm-seq</code> object, every player playing that
          <code>rthm-seq</code> will always have the same linear pitch contour
          whenever that <code>rthm-seq</code> appears in the piece. For
          information on the use of multiple <code>pitch-seq</code> curves, see
          the section on <a href="#multi-ps"
          onclick="jumpShow('multi-ps-div')">multiple curves in the same
          pitch-seq-palette</a> below.</p>

        <h5>Indicating chords in the pitch-seq curve</h5>
        <div id="pitch-seq-chords">
        <p>Numbers in additional parentheses within a <code>pitch-seq</code>
          indicate chords:</p>

        <pre class="source">
:rthm-seq-palette '((1 ((((4 4) - e e e e - - e e e e -))
                        :pitch-seq-palette ((1 (4) (3) 2 5 (7) 8 6)))))</pre>

        <p>If the given instrument is not capable of playing chords, as
          indicated by its definition in the <code>instrument-palette</code>
          being used for the piece, then single pitches are selected
          by <em>slippery chicken</em> instead. More information on topics
          related to chords can be found on the <a href="./chords.html">chord
          functions</a> page. </p></div>

        <h5>Avoiding melodic octaves</h5>
        <p>By default, <em>slippery chicken</em> will avoid melodic octaves
          when selecting pitches for the players. This feature can be turned
          off by setting the <code>:avoid-melodic-octaves</code> slot
          to <code>NIL</code>. </p>

        <p>Default output:</p>
        
        <pre class="source">
        :set-palette '((1 ((c5 d5 e5 f5 g5 a5 b5 c6))))
        :set-map '((1 (1 1 1)))
        :rthm-seq-palette '((1 ((((4 4) - e e e e - - e e e e -))
                                :pitch-seq-palette (1 2 3 4 5 6 7 8))))
        :rthm-seq-map '((1 ((fl (1 1 1)))))</pre>

        <table class="image">
          <!-- for 150ppi LP png fragment examples scale by .75 -->
          <tr><td><img class="fragment"
                       src="./resources/pitches-avoid-8ves-t.png"
                       alt="pitches-avoid-8ves-t.png" 
                       width="467"/></td></tr> 
        </table>

        <p>Setting <code>:avoid-melodic-octaves</code> to <code>NIL</code>:</p>

        <pre class="source">
        :set-palette '((1 ((c5 d5 e5 f5 g5 a5 b5 c6))))
        :set-map '((1 (1 1 1)))
        :rthm-seq-palette '((1 ((((4 4) - e e e e - - e e e e -))
                                :pitch-seq-palette (1 2 3 4 5 6 7 8))))
        :avoid-melodic-octaves nil
        :rthm-seq-map '((1 ((fl (1 1 1)))))</pre>

        <table class="image">
          <!-- for 150ppi LP png fragment examples scale by .75 -->
          <tr><td><img class="fragment"
                       src="./resources/pitches-avoid-8ves-n.png"
                       alt="pitches-avoid-8ves-n.png" 
                       width="470"/></td></tr> 
        </table>
    
        <p class="close"><a href="#" id="curves-div-hide" class="hideLink"
              onclick="showHide('curves-div');return false;">close</a></p>
      </div>

      <h4 id="multi-ps"><a href="#multi-ps" id="multi-ps-div-show"
                           onclick="showHide('multi-ps-div');return
                           false;">+</a> 
        Multiple curves in the same :pitch-seq-palette</h4>
      <div id="multi-ps-div" class="more">
        <p>There can be as many separate <code>pitch-seq</code> curves in
          each <code>pitch-seq-palette</code> as the user
          likes. A <code>pitch-seq-palette</code> with more than
          one <code>pitch-seq</code> will produce multiple linear pitch curves
          for the same rhythmic material. Depending on the structure of
          the <code>rthm-seq-map</code>, these different curves may be played
          by different players at the same time or by the same player at
          different times, or both. </p>

        <p><em>slippery chicken</em> applies each different
          <code>pitch-seq</code> consecutively starting at the top of the
          ensemble and moving downwards through the players. Thus, if three
          players are assigned within the <code>rthm-seq-map</code> to play
          the same <code>rthm-seq</code> at the same time, the
          first <code>pitch-seq</code> curve is given to the player that
          appears first in the <code>ensemble</code> list, the second to the
          next player in the <code>ensemble</code> list, and the third to the
          player after that.</p>
      
        <p>For example, this very brief <code>slippery-chicken</code> piece has
          three players and defines three different <code>pitch-seq</code>
          curves with distinct contours within the
          one <code>pitch-seq-palette</code> of the one <code>rthm-seq</code>
          in the <code>rthm-seq-palette</code>. It then constructs the
          composition using a <code>rthm-seq-map</code> in which all three
          players play the same <code>rthm-seq</code> at the same time, only
          once:</p>

        <pre class="source">
(let* ((multi-ps
        (make-slippery-chicken
         '+multi-ps+
         :title "Multiple pitch-seqs"
         :ensemble '(((fl (flute :midi-channel 1))
                      (ob (oboe :midi-channel 2))
                      (cl (b-flat-clarinet :midi-channel 3))))
         :tempo-map '((1 (q 60)))
         :set-palette '((1 ((c4 d4 e4 f4 g4 a4 b4 c5))))
         :set-map '((1 (1)))
         :rthm-seq-palette '((1 ((((4 4) - e e e e - - e e e e -))
                                 :pitch-seq-palette ((8 7 8 7 8 7 8 7)
                                                     (5 4 3 4 5 4 3 4)
                                                     (1 2 1 2 1 2 1 2)))))
         :rthm-seq-map '((1 ((fl (1))
                             (ob (1))
                             (cl (1))))))))
  (write-lp-data-for-all multi-ps))</pre>
    
        <p>The resulting score fragment shows how the
          different <code>pitch-seq</code> curves of the
          above <code>pitch-seq-palette</code> determine the linear contours
          for each player. It also demonstrates the distinction between
          pitch contours and actual pitch selection in 
          <em>slippery chicken</em>, as the numbers do not represent pitches,
          but directionality and relative distance within the linear pitch
          motion. Thus, the clarinet maintains the contour indicated by
          <code>1 2 1 2...</code>, even though its <code>2</code> is higher in
          pitch than the oboe's <code>4</code>. (More detail on this can be
          found in the section on <a href="#selection"
          onclick="jumpShow('selection-div')">how slippery chicken selects
          pitches</a> below.)</p>

        <table class="image">
          <!-- for 150ppi LP png fragment examples scale by .75 -->
          <tr><td><img class="fragment"
                       src="./resources/resultsOfMultiplePitchSeqs.png"
                       alt="resultsOfMultiplePitchSeqs.png"
                       width="284"/></td></tr> 
        </table>

          <p class="close"><a href="#" id="multi-ps-div-hide" class="hideLink"
                onclick="showHide('multi-ps-div');return false;">close</a></p>
        </div>

        <h5>Assigning a pitch-seq to specific instruments</h5>
        <p>There's also a way to assign a pitch-seq to an arbitrary number of
        instruments (as distinct from players).  E.g.

        <pre class="source">
        ((1 2 1 1 3)
        ((1 3 2 1 5) violin flute)
        (1 3 5 6 7))
        </pre>  </p>
        <p>In this case, such a pitch-seq will only be used for the named
        instruments.  This implies that those instruments will use only a
        pitch-seq that they're named in, and that other instruments will only
        use a pitch-seq for which there are no named instruments.
        </p>
      
      <h3>Advanced pitch-seq and set topics</h3>
      <h4 id="selection"><a href="#selection" id="selection-div-show"
                            onclick="showHide('selection-div');return
                                     false;">+</a> 
        How <em>slippery chicken</em> selects pitches</h4>
      <div id="selection-div" class="more">
        <p><em>slippery chicken</em> selects the specific pitches for each
          player in a given sequence one player after the next. By default, it
          chooses pitches for the players in the order in which they appear in
          the <code>ensemble</code> list. The user can specify a different
          order using the <code>:instruments-hierarchy</code> keyword argument
          of the <code>make-slippery-chicken</code> function. When choosing
          pitches for players, <em>slippery chicken</em> takes into account
          which pitches have already been assigned to other players playing at
          the same time, so the order in which it processes the players is
          important for pitch allocation.</p>

        <p>Once the order is determined, <em>slippery chicken</em> follows
          specific steps to select pitches from the current set for each
          instrument currently being played by each of the players. If you want
          to see printed details in the Lisp interpreter of which pitches are
          chosen from the current set using the current pitch sequence and
          instrument, be sure to put this code before your call to
        <code>make-slippery-chicken</code>:
        <code>(set-sc-config 'verbose-pitch-selection t)</code> </p><br />

        <ol>
          <li><em>slippery chicken</em> first limits the
            current set to only pitches that fall within the
            instrument's range.</li>
          <li>It then removes any pitches that have already been allocated to
            other instruments.</li>

            <li>If the ID of the player, or failing that the
            <code>subset-id</code> slot of the instrument, matches the ID of a
            <code>subset</code> of the current set object, the pitches are
            further limited to those common to both the specified
            <code>subset</code> and the pitches remaining from step 2.</li>

            <li>If the ratio of the number of pitches now available to the
            number of different numerical values in the <code>pitch-seq</code>
            is less than the <code>pitch-seq-index-scaler-min</code> slot of
            the <code>slippery-chicken</code> object (0.5 by default),
            <em>slippery chicken</em> will add pitches that have already been
            allocated to other instruments until this ratio is met or exceeded.
            (The user can change the value of
            the <code>pitch-seq-index-scaler-min</code> by specifying the
            keyword argument of the same name within the call to
            the <code>make-slippery-chicken</code> function). This
            ratio&mdash;which may indeed be greater than one&mdash;is then used
            to multiply the numbers in the
            <code>pitch-seq</code> (which are subsequently rounded) to obtain
            the indices for getting the pitches for each number in the
            <code>pitch-seq</code> from the list of available pitches. In this
            case, the lowest number in the <code>pitch-seq</code> will be
            assigned to the lowest of the available pitches.
          </li>
          <li>If after the first three steps there are enough pitches to cover
            the different numbers in the <code>pitch-seq</code>, the pitch
            assigned to the lowest number in the <code>pitch-seq</code> will
            depend on the value of the <code>prefers-notes</code> slot of the
            instrument definition: 
            <ol type="a">
              <li>If the <code>prefers-notes</code> slot has been set to
                <code>high</code>, the highest number in
                the <code>pitch-seq</code> will be assigned to the highest of
                the available pitches.</li>
              <li>If the <code>prefers-notes</code> slot has been set
                to <code>low</code>, the lowest number in
                the <code>pitch-seq</code> will be assigned to the lowest of
                the available pitches.</li>
              <li>If this slot has not been set (defaults to <code>NIL</code>),
                the range of pitches assigned to the numbers of
                the <code>pitch-seq</code> will correspond to the middle of the
                available pitches, with two exceptions: 
                <ul>
                  <li>If the lowest
                    number in the <code>pitch-seq</code> is 5 or higher,
                    this will have the same effect as
                    the <code>prefers-notes</code> slot being set to
                    <code>high</code>.</li>
                  <li>If the lowest number in the <code>pitch-seq</code> is 1,
                    this will have the same effect as the
                    <code>prefers-notes</code> slot being set
                    to <code>low</code>. </li>
              </ul>

              If the user would like to change either of these values, 1 or 5,
            do e.g.<br /> <code>(set-sc-config 'pitch-seq-lowest-equals-prefers-high 6)</code><br /><code>(set-sc-config 'pitch-seq-lowest-equals-prefers-low 0)</code>
              
            </li> 
          </ol></li>
          <li>If at this point there are no available pitches, the function
            will trigger an error and exit (however, see NB below). This could happen, for example, if
            the <code>set-limits-high</code> and
            <code>set-limits-low</code> take the available pitches outside of
            the instrument's range.</li> 
        </ol>

        <p class="nb">NB: By default, <code>slippery chicken</code> will also
          prevent melodic octaves from being assigned to a player. Setting
          the <code>slippery-chicken</code>
          object's <code>avoid-melodic-octaves</code> slot to <code>NIL</code>
          will disable this feature, as described in the <a href="#curves"
          onclick="jumpShow('curves-div')">understanding pitch-seq curves</a>
        section above. </p>

        <p class="nb">NB: Since version 1.10, if no pitches are available for
        the current instrument to choose from the set, it is possible to avoid
        the error and automatically be allocated a rest sequence instead by
        placing/evaluating the following before your call to
        <code>make-slippery-chicken</code>:
        <code>(set-sc-config 'pitch-seq-no-pitches-error nil)</code> </p>

        <h4>Changing pitches post-generation</h4>
        <p>There are ways to narrow the set of pitches available to an player
          prior to generating the data of the <code>slippery-chicken</code>
          object, such as by using the <code>set-limits-high</code>
          and <code>set-limits-low</code> keywords of
          the <code>make-slippery-chicken</code> function (see
          <a href="#set-limits"
            onclick="jumpShow('set-limits-div')">below</a>), or through the use
            of <code>subsets</code> (see <a href="#subsets"
            onclick="jumpShow('adding-subsets-div')">below</a>, and the page
            on <a href="./instruments.html">tailoring instrument
            definitions</a>). </p>

        <p>However, if the user would like to change the specific pitches of
          just a few notes after a piece has been generated, a number of
          post-generation editing methods are available for modifying the data
          of existing <code>slippery-chicken</code> objects. The
          post-generation data-editing method <code>change-pitch</code>, for
          example, allows the user to change the pitch of a single specific
          note, where the new pitch is not required to be a member of the
          current set. See the page
          on <a href="post-gen-editing.html">post-generation data editing</a>
          for more detail. </p>

        <p>Since <em>slippery chicken</em> can also be used to produce MIDI
          files from its data, importing these into notation software such as
          Finale, Sibelius, or MuseScore is also always an option. With a bit
          of searching, the corresponding pitch values can also be found and
          modified in any LilyPond files created. (Some versions of LilyPond
          also include a point-and-click feature by which clicking on a note in
          the PDF output jumps automatically to that note in
          the <code>.ly</code> file.)</p>

        <p class="close"><a href="#" id="selection-div-hide" class="hideLink"
              onclick="showHide('selection-div');return false;">close</a></p>
      </div>

      <h4 id="set-limits"><a href="#set-limits" id="set-limits-div-show"
                             onclick="showHide('set-limits-div');return
                             false;">+</a> 
        set-limits-high and set-limits-low</h4>
      <div id="set-limits-div" class="more">
        <p>In addition to the definition of the highest and lowest pitches of
          an instrument's absolute range (as defined in the
          individual <code>instrument</code> objects of
          the <code>instrument-palette</code> being used for a given piece),
          the user can further constrain the pitches assigned to a given
          instrument to sub-ranges for any number of consecutive sequences of a
          piece. This is done using the keyword
          arguments <code>:set-limits-high</code>
          and <code>:set-limits-low</code> with a list of 2-element lists, in
          the format seen here:</p>

        <pre class="source">
   :set-limits-high '((cl (0 c6 50 c5 100 c6))
                      (vc (0 g4 50 g3 100 g4))
                      (cb (0 f3 50 f2 100 f3)))</pre>
    
        <p>The first element of each 2-element list is the ID assigned by the
          user to the given <code>player</code> within
          the <code>ensemble</code> block of
          the <code>make-slippery-chicken</code> function (and not the ID of
          the instrument within the <code>instrument-palette</code>). If the
          symbol <code>all</code> is given here, the subsequent list of
          breakpoint pairs will apply to all instruments, further constraining
          the high and low limits of the individual curves if there is an
          overlap, thus allowing <em>tessitura shaping</em> for the whole
          ensemble over the course of the piece.</p>

        <p>The second element of each 2-element list is a series of breakpoint
          pairs, each consisting of an x-axis number followed by either a
          note-name symbol or a MIDI note number. The pitch indicators refer to
          sounding pitches, not written (in the case of a transposing
          instrument). The x-axis range is arbitrary and will be scaled to fit
          the number of <em>sequences</em> in the entire piece. Since the
          x-axis numbers in this example span from 0 to 100, if the given piece
          consisted of 100 sequences, the second x-axis value here of 50 would
          indicate the 50th sequence in the piece.</p>

        <p><em>slippery chicken</em> interpolates a gradual curve between the
          values associated with each x-axis number. In the above example the
          upper range of the instrument associated with player <code>cl</code>
          would be limited to C6 at the opening, gradually being lowered to C5
          by the middle sequence, and gradually increasing to C6 again by the
          last sequence of the piece.</p>
        
        <p class="nb">NB: Since the operations behind
          the <code>set-limits-</code> slots are based on interpolation, at
          least two pairs of breakpoint are
          required. Correspondingly, <code>set-limits-</code> values cannot be
          used when generating a musical fragment that has only one sequence in
          the <code>rhtm-seq-map</code>. Attempting to do so will produce
          a <code>division by zero</code> error.</p>

        <p class="nb">NB: If a single capping of an instrument's pitch range for
          an entire piece is required rather than a curve for range limits that
          change over the piece, another option for achieving this is to modify
          the <code>highest-</code> or <code>lowest-written</code> or
          <code>-sounding</code> values of the given <code>instrument</code>
          object instead. See the documentation
          on <a href="instruments.html#changing">changing instrument attributes
            temporarily</a> for more on this.</p>

        <p class="close"><a href="#" id="set-limits-div-hide" class="hideLink"
              onclick="showHide('set-limits-div');return false;">close</a></p>
      </div>

      <h4>subsets and related-sets</h4>
      <h5 id="adding-subsets"><a href="#adding-subsets"
                                 id="adding-subsets-div-show"
                                 onclick="showHide('adding-subsets-div');
                                 return false;">+</a> 
        Adding subsets and related-sets to a set</h5>
      <div id="adding-subsets-div" class="more">
        <p>Each set in a <code>set-palette</code> can also
          contain <code>subsets</code> and <code>related-sets</code>. These
          will only be used during automatic pitch selection if there is a
          corresponding value set as the <code>subset-id</code> in the
          definition of an <code>instrument</code> object (see the page
          on <a href="./instruments.html">tailoring instrument definitions</a>
          and the section on <a href="#subset-id"
          onclick="jumpShow('subset-id-div')">limiting an instrument's pitches
          using subset-id</a> below). They can also be very useful when writing
          user-defined functions, such as for chord selection (see the page
          on <a href="./chords.html#subset-chords">chord functions</a> for more
          detail).</p>

        <p>The primary difference between <code>subsets</code>
          and <code>related-sets</code> is that all pitches specified in
          the <code>subsets</code> slot must also be members of the primary set
          in the <code>set-palette</code>, whereas
          the <code>related-sets</code> slot can contain any pitch, whether
          part of the primary set or not.</p>

        <p>When a <code>subset</code> is specified with pitches that are not
          members of the primary set, <em>slippery chicken</em>
          will produce an error:</p> 

        <pre class="source">
sc-set::check-subsets: 
   Note C4 given in subset MBA1 of set SET1 is not part of the main set.
   [Condition of type SIMPLE-ERROR]</pre>

        <p>Both <code>subsets</code> and <code>related-sets</code> can be
          entered as simple or nested key-data pairs, whereby the nested
          approach must be reflected in an additional set of
          parentheses. Simple key-data pairs would look like this:</p>

        <pre class="source">
 :set-palette '((1 ((f3 g3 a3 bf3 c4 d4 e4 f4 g4 a4 b4 c5 d5 e5 f5 g5)
                    :subsets ((pno1 (c4 e4 g4))
                              (pno2 (d4 f4 a4))
                              (mba1 (a3 c4 e4)))
                    :related-sets ((pno3 (gs4 bf4 df5))
                                   (mba2 (fs3 af3 cs4))))))</pre>

        <!-- for a 150ppi CMN png fragment scale width by .60 -->
        <table class="image">
          <tr><td><img class="fragment"
               src="./resources/pitches-subsets-simple.png" 
               alt="pitches-subsets-simple.png" width="373" /></td></tr>
        </table>
        <br />

        <p>Nested <code>subsets</code> and <code>related-sets</code> would be
          entered such:</p>

        <pre class="source">
 :set-palette '((1 ((c3 g3 cs4 e4 fs4 a4 bf4 c5 d5 f5 gf5 af5 ef6)
                    :subsets ((piano ((pno1 (cs4 e4 fs4))
                                      (pno2 (e4 fs4 a4))))
                              (marimba ((mba1 (c3 g3 cs4))
                                        (mba2 (g3 cs4 e4)))))
                    :related-sets ((piano ((pno3 (d3 a3 d5))
                                           (pno4 (c3 g3 d5))))))))</pre>

        <table class="image">
          <!-- for a 150ppi CMN png fragment scale width by .60 -->
          <tr><td><img class="fragment"
                       src="./resources/pitches-subsets-nested.png" 
                       alt="pitches-subsets-nested" width="391" /></td></tr>
          <caption>NB: These graphics were created by applying
            the <code>cmn-display</code> method directly to a
            <code>set-palette</code> object. See the page
            on <a href="./output.html#cmn-frags">output</a> for more detail on
            this feature.</caption>
        </table>
        <br />

         <p class="close"><a href="#" id="adding-subsets-div-hide"
              class="hideLink" onclick="showHide('adding-subsets-div');return
              false;">close</a></p>
      </div>

      <h5 id="subset-id"><a href="#subset-id"
                                 id="subset-id-div-show"
                                 onclick="showHide('subset-id-div');
                                 return false;">+</a> 
          Limiting an instrument's pitches using subset-id</h5>
      <div id="subset-id-div" class="more">

        <p>The <code>subset-id</code> slot of an <code>instrument</code> object
          will cause <em>slippery chicken</em> to automatically limit an
          instrument's pitches to the pitches in the
          corresponding <code>subset</code> of the current set. This applies to
          both linear pitch contours and to any chords made (see the section
          on <em>chord functions and set-palette subsets</em> of
          the <a href="./chords.html">chords</a> page for more on restricting
          only the chords for a player to subsets without limiting the linear
          pitch contours for that player's current instrument). If there is
          no <code>subset</code> in the current set with a matching ID, the
          <a href="#selection" onclick="jumpShow('selection-div')">default
                                                              rules for pitch
                                                              selection</a>
          apply.</p>

        <p>This example sets the <code>subset-id</code> slots of
          the <code>flute</code>, <code>oboe</code>,
          and <code>b-flat-clarinet</code> instruments that are contained in
          the <code>+slippery-chicken-standard-instrument-palette+</code>
          to <code>flute-notes</code>, <code>oboe-notes</code>,
          and <code>clarinet-notes</code>, and creates corresponding subsets
          with the same ID in the set: </p>

        <pre class="source">
(set-slot 'subset-id 'flute-notes 'flute
          +slippery-chicken-standard-instrument-palette+) 

(set-slot 'subset-id 'oboe-notes 'oboe
          +slippery-chicken-standard-instrument-palette+)

(set-slot 'subset-id 'clarinet-notes 'b-flat-clarinet
          +slippery-chicken-standard-instrument-palette+)

(let* ((subset-id-piece
       (make-slippery-chicken
        '+subset-id-piece+
        :title "subset id piece"
        :ensemble '(((fl (flute :midi-channel 1))
                     (ob (oboe :midi-channel 2))
                     (cl (b-flat-clarinet :midi-channel 3))))
        :set-palette '((1 ((b3 c4 d4 e4 f4 g4 a4 b4 c5 d5 e5 f5 g5 a5 b5 c6
                               d6 e6 f6 g6 a6 b6) 
                           :subsets ((flute-notes (b5 c6 d6 e6 f6 g6 a6 b6)) 
                                     (oboe-notes (a4 b4 c5 d5 e5 f5 g5 a5))
                                     (clarinet-notes (b3 c4 d4 e4 f4 g4)))))) 
        :set-map '((1 (1 1 1)))
        :rthm-seq-palette '((1 ((((4 4) - e. s - - e e - 
                                  - +s s s s - (s) - s s s - )) 
                                :pitch-seq-palette ((2 2 3 1 1 2 1 2 2 2) 
                                                    (6 8 5 5 7 7 9 6 8 10) 
                                                    (5 4 3 1 1 2 3 3 4 4)
                                                    (1 3 3 2 1 2 3 1 1 1))))) 
        :rthm-seq-map '((1 ((fl (1 1 1))
                            (ob (1 1 1))
                            (cl (1 1 1))))))))
  (write-lp-data-for-all subset-id-piece :base-path "/tmp/"))</pre>

        <p>When the piece is generated, each part will only contain pitches
from the corresponding <code>subset</code>:</p>

<p>NB From version 1.09 you can easily set the subset-id to be the same as the
ID of each instrument in an instrument-palette: e.g. <code>(auto-set-subset-id
+slippery-chicken-standard-instrument-palette+)</code></p>

        <table class="image">
          <!-- for 150ppi LP png fragment examples scale by .75 -->
          <tr><td><img class="fragment"
                       src="./resources/pitches-subset-id.png"
                       alt="pitches-subset-id.png"
                       width="767"/></td></tr>
        </table>

        <p class="close"><a href="#" id="subset-id-div-hide" class="hideLink"
              onclick="showHide('subset-id-div');return false;">close</a></p>
      </div>

      <!-- **************************************************************** --> 
      <!-- This spacer <br /> is necessary as a buffer between the content and
         the footer. It cannot be added as padding to #push, since #push has to
         be the same size as #footer in order for the dynamic placement to work
         properly --> 
      <br /><br />

      <div id="push"></div>
    </div>
    <script type="text/javascript">footer();</script>
    <noscript>Your browser does not support JavaScript!</noscript>
  </body>
</html>
