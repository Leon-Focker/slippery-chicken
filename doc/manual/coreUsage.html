<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>slippery chicken documentation - "primary disposition" &emdash; core
      usage</title>
    <!-- change the following two file paths to be ../ if in a subdirectory -->
    <link href="../sc-stylesheet.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="../head-foot.js"></script>
    <script language="javascript" type="text/javascript"
            src="../show-hide.js"></script>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  </head>
  
  <body onload="showHide(window.location.hash.substring(1)+'-div')" >
    <div id="content">
      <!-- files in the doc directory will call header with argument "./" but
           those in subdirectories will need "../" -->
      <script type="text/javascript">header("../");</script>
      <noscript>Your browser does not support JavaScript!</noscript>
      <!-- **************************************************************** -->
      
      <h2>"Primary Disposition" &mdash; A guide to the core usage of 
        <em>slippery chicken</em></h2>

      <h3 id="files"><a href="#files" id="files-div-show"
                        onclick="showHide('files-div');return false;">+</a>
        Associated files</h3>
      <div id="files-div" class="more">
        <ul>
          <li><a href="../examples/primary-disposition.lsp">The
              slippery-chicken file from this guide</a></li>
          <li><a href="../media/primary-disposition.mid">The MIDI output
              generated by this file</a></li>
          <li><a href="../media/_primary-disposition-score.pdf">The PDF score
              produced with this file's LilyPond output </a></li>
          <li><a href="../media/primary-disposition.eps">The CMN EPS output
              generated by this file</a></li>
          <li><a href="../media/primary-disposition_mix.mp3">An MP3 of the
              piece using instrument samples</a></li>
        </ul>
        <p class="close"><a href="#" id="files-div-hide" class="hideLink"
              onclick="showHide('files-div');return false;">close</a></p>
        <br />
      </div>

      <p class="nb">NB: An exercise relating to the material covered
        in this tutorial can be found on
        the <a href="./exercises.html#core">Exercises</a> page.</p>

      <p>This document assumes you have familiarised yourself with the
        <a href="../overview.html">overview</a> and essential concepts
        of <em>slippery chicken</em>.</p>
    
      <p>The following is a brief introduction to the most basic use
        of <em>slippery chicken</em>'s core features. In this example all of
        the set palettes and maps, rhythm palettes and maps, pitch contours,
        articulation, and dynamics are entered by hand. This should provide the
        beginning user with an understanding of the framework that
        underlies <em>slippery chicken</em>. More advanced users will most
        probably begin replacing the hand-typed data with Lisp routines that
        will generate it for them.</p>

      <p>While <em>slippery chicken</em> is not limited to any specific style,
        it has so far been used for abstract, atonal, and
        microtonal <em>avant-garde</em> compositions. This first example,
        however, will be a piece in a slightly more minimalist style.</p>

      <h3 id="code"><a href="#code" id="code-div-show"
                       onclick="showHide('code-div');return false;">+</a>
        The code</h3>
      <div id="code-div" class="more">
        <p>The code is first presented on its own here, then explained point by
          point below.</p>

        <p class="nb">NB: It is strongly recommended that the user not copy and
          paste code from the web browser into the Lisp listener, as this can
          occasionally lead to errors. The code below can be downloaded in
          complete form under the <a href="#files"
          onclick="jumpShow('files-div')">Associated files</a> section
          above.</p>
        
        <pre class="source">
(in-package :sc)

(in-scale :chromatic)

(make-slippery-chicken  
 '+primary-disposition+ 
 :title "Primary Disposition" 
 :instrument-palette +slippery-chicken-standard-instrument-palette+ 
 :ensemble '(((flt (flute :midi-channel 1))
              (clr (b-flat-clarinet :midi-channel 2))
              (vln-one (violin :midi-channel 3)) 
              (vla (viola :midi-channel 4)) 
              (cel (cello :midi-channel 5))))
 :staff-groupings '(2 3)
 :tempo-map '((1 (q 84)))
 :set-palette '((set1 ((fs2 b2 d4 a4 d5 e5 a5 d6))) 
                (set2 ((b2 fs3 d4 e4 a4 d5 e5 a5 d6)))
                (set3 ((cs3 fs3 e4 a4 e5 a5 e6))) 
                (set4 ((fs2 cs3 e4 a4 b4 e5 a5 b5 e6)))) 
 :set-map '((1 (set1 set1 set2 set1 set2)) 
            (2 (set2 set2 set3 set2 set3 set2 set3)) 
            (3 (set3 set2 set4 set2 set4 set3 set4 set4 set2 set3 set4))
            (4 (set4 set1 set4 set1 set4 set1 set1)))   
 :set-limits-high '((vla (0 b4 100 b4))
                    (cel (0 f4 100 f4)))
 :rthm-seq-palette
 '((seq1 ((((4 4) - 16 16 8 - { 5 - 20 10 20 20 - } { 3 3 6 } )   
           ( - s s s s - (s) - s s s - - +e. s - q))   
          :pitch-seq-palette (1 2 3 4 5 6 7 8 9 1 2 3 4 5 6 7 8 9)
          :marks (mp 1 a 1 s 3 slur 1 3 a 4 slur 4 7 s 9 a 10 slur 16 18)))  
   (seq2 ((((4 4) - e e - - s s s s - (s) s (s) s { 3 - te te te - } )  
           ( - s s s - (s)  { 3 - te te - (te) } q \+8 (e) )) 
          :pitch-seq-palette (11 10 9 11 10 8 7 11 10 6 5 11 10 9 8 7 11) 
          :marks (mf 1 s 1 2 a 3 slur 3 4 a 5 slur 5 6 s 7 s 8 a 9 
                     slur 9 11 a 12 slur 12 14 s 15 16 a 17))) 
   (seq3 ((((4 4) { 3 - te te te - } - e e - - s s s s - (s) s (s) s ) 
           (- s s s s - - s s s s - { 3 - te te te - } { 3 - +te te te - } ))
          :pitch-seq-palette (1 2 1 2 3 1 2 3 4 5 6 1 2 3 5 4 4 4 2 7 5 4 5 6)   
          :marks (f 1 slur 1 3 a 4 s 4 5 slur 6 7 slur 8 9 s 10 11 
                    slur 12 13 slur 14 15 a 16 slur 18 19 slur 20 21 a 22 
                    slur 24 25)))  
   (seq4 ((((4 4) - s s (s) s - - s s - (e) - e s - (s) { 3 - te te te - } )
           ( { 5 - 10 10 20 - } - +s s s s - (e) - e+32 32 s s s - ))
          :pitch-seq-palette (4 5 4 4 5 4 5 4 7 13 
                                17 15 14 15 11 12 13 4 5 7 8) 
          :marks (ff 1 slur 1 2 s 3 slur 4 5 a 6 slur 8 10 s 10 a 11 s 11 
                     a 12 s 12 slur 13 15 slur 16 17 a 18 slur 19 22))))
 :rthm-seq-map
 '((1 ((flt (seq1 seq1 seq2 seq1 seq2)) 
       (clr (seq1 seq2 seq1 seq2 seq1)) 
       (vln-one (seq1 seq1 seq2 seq1 seq2))   
       (vla (seq1 seq2 seq1 seq2 seq1))   
       (cel (seq1 seq1 seq2 seq1 seq2))))
   (2 ((flt (seq1 seq1 seq2 seq1 seq2 seq1 seq2))
       (clr (seq1 seq1 seq3 seq1 seq3 seq1 seq3))
       (vln-one (seq2 seq2 seq3 seq2 seq3 seq2 seq3))  
       (vla (seq2 seq2 seq1 seq2 seq1 seq2 seq1))  
       (cel (seq3 seq3 seq2 seq3 seq2 seq3 seq2))))  
   (3 ((flt (seq1 seq1 seq2 seq1 seq2 seq1 seq2 seq2 seq1 seq2 seq2))
       (clr (seq2 seq2 seq3 seq2 seq3 seq2 seq3 seq3 seq2 seq3 seq3))
       (vln-one (seq3 seq3 seq4 seq3 seq4 seq3 seq4 seq4 seq3 seq4 seq4)) 
       (vla (seq4 seq4 seq3 seq4 seq3 seq4 seq3 seq3 seq4 seq3 seq3))  
       (cel (seq4 seq4 seq2 seq4 seq2 seq4 seq2 seq2 seq4 seq2 seq2))))  
   (4 ((flt (seq4 seq3 seq4 seq1 seq4 seq1 seq1))  
       (clr (seq3 seq2 seq3 seq2 seq1 seq2 seq1))
       (vln-one (seq2 seq1 seq1 seq1 seq2 seq1 seq1)) 
       (vla (seq4 seq3 seq4 seq2 seq1 seq1 seq1)) 
       (cel (seq2 seq2 seq2 seq1 seq2 seq1 seq1))))))

(midi-play +primary-disposition+ :midi-file "/tmp/primary-disposition.mid")

(cmn-display +primary-disposition+ :file "/tmp/primary-disposition.eps")

(write-lp-data-for-all +primary-disposition+ :base-path "/tmp/")

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;;; EOF primary-disposition.lsp</pre>
      
        <p class="close"><a href="#" id="code-div-hide" class="hideLink"
              onclick="showHide('code-div');return false;">close</a></p>
      </div>

      <h3 id="explained">The code explained</h3>
      <h4>Setting the environment</h4>
      <p>The first two lines in this example set two global parameters of the
        Lisp environment in which <em>slippery chicken</em> will generate the
        musical data and any accompanying output. It is encouraged to
        include these in each <em>slippery chicken</em> file.</p>

      <p>The first of these:</p>
      <pre class="source">
(in-package :sc)</pre>

      <p>&hellip;instructs the Lisp environment to process the following code
        within the <code>sc</code> (<em>slippery chicken</em>) package.</p>

      <p>The second:</p>
      <pre class="source">
(in-scale :chromatic)</pre>
    
      <p>&hellip;instructs <em>slippery chicken</em> to use
        the <code>chromatic</code> scale as the <code>#&lt;tuning&gt;</code>
        environment when processing all note-name symbols. See the page
        on <a href="./notenames-scales.html">note-names and scales</a> for more
        detail on global <code>#&lt;tuning&gt;</code> environments.</p>
    
      <h4 id="call">The call to <a
        href="../robodoc/slippery-chicken_lsp.html#slippery2dchicken2fmake2dslippery2dchicken">make-slippery-chicken</a></h4>
       <p>First the <code>make-slippery-chicken</code> function is called. This
       creates a <em>slippery chicken</em> object, which holds all of the data
       necessary to generate the piece.</p>

      <pre class="source">(make-slippery-chicken</pre>

      <p>The first argument to the make-slippery-chicken function is a global
        variable that is defined for the music created (the 
        <em>slippery chicken</em> object). The global nature of this variable
        allows for editing and manipulating the musical data after it is
        has been generated.</p>

      <pre class="source"> '+primary-disposition+</pre>

      <p>The next argument sets the title of the composition, which is used
        both for the title of the piece within the generated sheet music output
        as well as for the names of the LilyPond files automatically generated
        by <em>slippery chicken</em> (if that feature is used).</p>

      <pre class="source"> :title "Primary-Disposition"</pre>
      
      <h4 id="ensemble">The instruments and ensemble</h4>
      <p>Next, the instruments and ensemble are specified. The ensemble is made
        up of <em>players</em>, each of which can be assigned one or more
        <em>instruments</em>. For this example, each player plays only one
        instrument.</p>
    
      <h5>Instruments</h5>
      <p>The <code>instrument-palette</code> argument points to
        the <code>instrument-palette</code> used for the given
        piece. An <code>instrument-palette</code> contains the list
        of <code>instrument</code> objects used in the ensemble, with
        definitions of attributes such as pitch ranges, transpositions, and
        score names and abbreviations, etc. This piece uses
        the <code>+slippery-chicken-standard-instrument-palette+</code>, which
        is defined in the file <code>instruments.lsp</code> and automatically
        assigned to this global variable when <em>slippery chicken</em> is
        loaded.</p>

      <pre class="source"> :instrument-palette
        +slippery-chicken-standard-instrument-palette+</pre>

      <p>A description of how to modify the attributes of instruments in a
        given palette for the scope of a given composition, as well as how to
        create a new palette or combine existing palettes, can be found on the
        page on <a href="./instruments.html">tailoring instrument
        definitions</a>.</p>

      <h5>Ensemble</h5>
      <p>In the <code>ensemble</code> block, IDs are defined for each of the
        ensemble's <em>players</em>, and instruments from
        the <code>instrument-palette</code> are then assigned to each
        player. Indications for the MIDI channels on which the instruments are
        to be played back can be entered here as well, if MIDI output is
        desired. The ID chosen by the user for the player
        (e.g. <code>flt</code>) can be any arbitrary alpha-numeric combination,
        and will be used as a reference within the <code>rthm-seq-map</code>
        section of the call to the <code>make-slippery-chicken</code> function
        later. The name of the instrument must be the ID of the
        given <code>instrument</code> object exactly as it is defined in
        the <code>instrument-palette</code> used.</p>

      <p class="nb" id="lp-ins-names">NB: If LilyPond is to be used for
        printable output, the names chosen for the ensemble's players cannot
        contain numbers (e.g. <code>violin1</code>), as LilyPond's parser does
        not accept them. One option is to use hyphenated alphabetical
        characters instead, such as <code>violin-one</code>. Note that this
        does not refer to staff-names of instruments, just the symbol that
        identified a player in the <code>ensemble</code>,
        <code>rthm-seq-palette</code>, etc. (See <a
        href="nouveau-reich.html#names"><i>nouveau reich</i></a> for an example
        of changing score staff names.)</p>

      <pre class="source"> :ensemble '(((flt (flute :midi-channel 1))
              (clr (b-flat-clarinet :midi-channel 2))
              (vln-one (violin :midi-channel 3)) 
              (vla (viola :midi-channel 4)) 
              (cel (cello :midi-channel 5))))</pre>

      <h5>Staff groupings for printed output</h5>
      <p>Should printed output be desired, the staff grouping layout of the
        score can be indicated using the <code>:staff-groupings</code>
        argument. This argument takes a list of the number of consecutive
        players grouped together from top to bottom, as they appear in
        the <code>ensemble</code> block. Thus, the following code indicates
        that in the score, the players of the ensemble are to be grouped into 2
        instruments, and 3 instruments (<code>flt</code> with <code>clr</code>,
        and <code>vln-one, vla, cel</code>).</p>

      <pre class="source"> :staff-groupings '(2 3)</pre>

      <h4 id="tempo">Tempo</h4>
      <p>The next argument is used to set the tempo. This example uses
        the <code>:tempo-map</code> argument for this purpose (see the page
        on <a href="./tempo.html">tempo</a> for other
        options). The <code>:tempo-map</code> argument takes a list of 2-item
        lists. The first item in each of these lists is the measure number at
        which the subsequent tempo indication is to begin. A starting tempo
        attached to the first measure at the very least must be specified
        here. The second item is the tempo indication itself, which takes a
        beat-type indicator paired with the number of beats per minute. The
        beat-type can be indicated using either numeric (e.g. <code>4</code>
        for a quarter-note) or alphabetic rhythm representations
        (e.g. <code>q</code> for a quarter note). (See the page
        on <a href="./rhythms.html">rhythms</a> for more detail on rhythmic
        representations in <em>slippery chicken</em>).</p>

      <p>The <code>tempo-map</code> stated here thus means that the tempo will
        be quarter = 84 starting in measure 1. This example will use just one
        tempo for the entire piece. </p>
    
      <pre class="source"> :tempo-map '((1 (q 84)))</pre>

      <h4 id="pitch-sets">Pitch collections</h4>
      <p>The pitch (or "set") data for a given piece is entered in
        the <code>set-palette</code> and <code>set-map</code> blocks. Each of
        the sets in the <code>set-palette</code> block defines a limited
        collection of pitches. The first element of each list in
        the <code>set-palette</code> block is the set's ID, which is chosen by
        the user and can consist of any alpha-numeric combination. This ID will
        then be referenced from within the <code>set-map</code> block when
        mapping the sets to the piece's structure. The pitches are entered here
        using the note-naming conventions spelled out in the documentation
        for <a href="./notenames-scales.html">note-names and scales</a>. </p>

      <p>This example defines pentatonic sets:</p>
    
      <pre class="source"> :set-palette '((set1 ((fs2 b2 d4 a4 d5 e5 a5 d6))) 
                (set2 ((b2 fs3 d4 e4 a4 d5 e5 a5 d6)))
                (set3 ((cs3 fs3 e4 a4 e5 a5 e6))) 
                (set4 ((fs2 cs3 e4 a4 b4 e5 a5 b5 e6))))</pre>

      <p>The <code>set-map</code> block then determines which sets of pitches
        are available for each sequence in the piece. Any given sequence will
        contain only pitches from the corresponding set referred to in
        the <code>set-map</code> for that sequence.</p>

      <p>The first number of each list in the <code>set-map</code> is the ID
        assigned to that section of the piece, and corresponds to the section
        ID of the other <code>-maps</code> in the <code>slippery-chicken</code>
        object being created. Section IDs must be numerical values only. The
        list following the section ID is a series of the IDs defined for the
        sets in the <code>set-palette</code>. These can be used in any order
        in the <code>set-map</code>. They apply to the entire ensemble for the
        corresponding sequence within the composition.</p>

      <pre class="source"> :set-map '((1 (set1 set1 set2 set1 set2)) 
            (2 (set2 set2 set3 set2 set3 set2 set3)) 
            (3 (set3 set2 set4 set2 set4 set3 set4 set4 set2 set3 set4))
            (4 (set4 set1 set4 set1 set4 set1 set1)))</pre>

      <h5>Limiting an instrument's pitch range</h5>
      <p>The pitch ranges of the instruments in
        the <code>+slippery-chicken-standard-instrument-palette+</code> are
        defined to include the absolute spectrum of pitches available to the
        instruments. This can occasionally result in <em>slippery chicken</em>
        choosing pitches from the extreme ends of the pitch ranges. A number of
        options are available for addressing this. For this
        piece, <code>set-limits-high</code> is used to limit the upper range of
        the cello to <code>F4</code> and that of the viola
        to <code>B4</code>. </p>

      <pre class="source"> :set-limits-high '((vla (0 b4 100 b4))
                    (cel (0 f4 100 f4)))</pre>

      <p>See the page on <a href="./pitches.html#set-limits">pitches</a> for
        more details on the usage of <code>:set-limits-high</code>
        and <code>:set-limits-low</code>.</p>

      <h4 id="rhythms">Rhythms</h4>
      <p>The rhythmic data for the piece is defined in
        the <code>rthm-seq-palette</code>. The <code>rthm-seq-palette</code>
        consists of a list of rhythm sequences (<code>rthm-seq</code> objects),
        which are enclosed in separate sets of parentheses. As with
        the <code>set-palette</code>, each <code>rthm-seq</code> is given an
        ID by the user, and these IDs too can consist of any alpha-numeric
        combination.</p>

      <p>The individual <code>rthm-seq</code> objects consist of a list of
        numbers and/or letters that represent rhythmic
        durations. Each <code>rthm-seq</code> can be one or more measures long,
        and each measure may start with a time signature (see the documentation
        on <a href="./rsp-rsm.html#rthm-seq">the rthm-seq object</a> for
        more detail on how to construct a <code>rthm-seq</code>). Rhythmic
        values can be written in numeric form or using the alphabetic
        nomenclature (see the documentation
        on <a href="./rhythms.html">rhythms</a> for more detail on
        rhythm-naming conventions).</p>

      <pre class="source"> :rthm-seq-palette
'((seq1 ((((4 4) - 16 16 8 - { 5 - 20 10 20 20 - } { 3 3 6 } )   
           ( - s s s s - (s) - s s s - - +e. s - q))</pre>

      <h3 id="pitch-curves">Pitch curves</h3>
      <p>Each <code>rthm-seq</code> in the <code>rthm-seq-palette</code> also
        requires indications for the melodic contour of the pitches
        that <em>slippery chicken</em> will automatically assign to the rhythms
        it contains. This is done by defining a <code>pitch-seq-palette</code>
        within each <code>rthm-seq</code>.</p>
    
      <p>The list of numbers in the <code>pitch-seq-palette</code> represent a
        general pitch linear contour that is scaled to the available pitches
        for each instrument playing that <code>rthm-seq</code> in any given
        sequence. The difference between two consecutive numbers in
        the <code>pitch-seq-palette</code> indicates the direction and
        relative size of the interval between the corresponding two pitches
        selected by <em>slippery chicken</em>. The actual pitches selected
        by <em>slippery chicken</em> from the current set will
        depend on a number of factors, including the range of the instrument
        playing them.</p>

      <p>See the page on <a href="./pitches.html">pitches</a> for more
        on <a href="./pitches.html#curves">understanding pitch-seq curves</a>
        and more detail on
        <a href="./pitches.html#selection">how <em>slippery chicken</em>
          selects pitches</a>. </p>

      <pre class="source">
            :pitch-seq-palette (1 2 3 4 5 6 7 8 9 1 2 3 4 5 6 7 8 9)</pre>
    
      <h3 id="marks">Articulation, dynamics, slurs</h3>
      <p>Indications for articulation, dynamics, slurs and many performance
        techniques for both CMN and LilyPond output can also be enclosed within
        each individual <code>rthm-seq</code> of
        the <code>rthm-seq-palete</code>. This is done using
        the <code>:marks</code> keyword followed by a list of the marks to be
        added (such as <code>a</code> for an accent or <code>s</code> for
        staccato) paired with index numbers for the
        specific <code>rhythm</code> items within the <code>rthm-seq</code> to
        which the marks are to be attached. </p>

      <p>More about adding marks to a score can be found on the page
        about <a href="./marks.html">articulation, dynamics, and performance
        techniques</a>. A list of the marks available can be found on the
        <a href="./marks.html#tables">tables of marks</a> portion of that same
        page.</p>

      <p class="nb">NB: Marks are attached to <code>rhythm</code> items of
        the <code>rthm-seq</code>, and not to items in
        the <code>pitch-seq</code> of the <code>pitch-seq-palette</code>. Two
        tied rhythmic values are counted as separate items for this
        function.</p>

      <pre class="source"> :marks (mp 1 a 1 s 3 slur 1 3 a 4 slur 4 7 s 9 a 10 slur 16 18)))</pre>

      <p>The rest of the <code>rthm-seq-palette</code> in this example is
        constructed in the same manner:</p>

      <pre class="source">   (seq2 ((((4 4) - e e - - s s s s - (s) s (s) s { 3 - te te te - } )  
           ( - s s s - (s)  { 3 - te te - (te) } q \+8 (e) )) 
          :pitch-seq-palette (11 10 9 11 10 8 7 11 10 6 5 11 10 9 8 7 11) 
          :marks (mf 1 s 1 2 a 3 slur 3 4 a 5 slur 5 6 s 7 s 8 a 9 
                     slur 9 11 a 12 slur 12 14 s 15 16 a 17))) 
   (seq3 ((((4 4) { 3 - te te te - } - e e - - s s s s - (s) s (s) s ) 
           (- s s s s - - s s s s - { 3 - te te te - } { 3 - +te te te - } ))
          :pitch-seq-palette (1 2 1 2 3 1 2 3 4 5 6 1 2 3 5 4 4 4 2 7 5 4 5 6)   
          :marks (f 1 slur 1 3 a 4 s 4 5 slur 6 7 slur 8 9 s 10 11 
                    slur 12 13 slur 14 15 a 16 slur 18 19 slur 20 21 a 22 
                    slur 24 25)))  
   (seq4 ((((4 4) - s s (s) s - - s s - (e) - e s - (s) { 3 - te te te - } )
           ( { 5 - 10 10 20 - } - +s s s s - (e) - e+32 32 s s s - ))
          :pitch-seq-palette (4 5 4 4 5 4 5 4 7 13 
                                17 15 14 15 11 12 13 4 5 7 8) 
          :marks (ff 1 slur 1 2 s 3 slur 4 5 a 6 slur 8 10 s 10 a 11 s 11 
                     a 12 s 12 slur 13 15 slur 16 17 a 18 slur 19 22))))
</pre>

    <h3 id="structure">The structure</h3>
    <p>The last major block of the <code>make-slippery-chicken</code> function
      is the <code>rthm-seq-map</code>. This is where the
      individual <code>rthm-seq</code> objects, with their pitch contours and
      marks, are assembled into the desired order to create the structure of
      the piece.</p>

    <p>There must be exactly the same number of sections in this map as there
      are in the <code>set-map</code>, and the section IDs must be the
      same. Following the section ID, the first item in each list of a given
      section is then the <em>player</em> (e.g. <code>flt</code>), as named in
      the <code>ensemble</code> block. The items within the lists associated
      with each player must consist of IDs assigned to the
      individual <code>rthm-seq</code> objects in
      the <code>rthm-seq-palette</code>. There must be exactly the same number
      of <code>rthm-seq</code> IDs for each player of each section as there are
      set IDs in the <code>set-map</code> for the corresponding
      section. </p>

    <p>All simultaneously occurring <code>rthm-seq</code> objects in
      the <code>rthm-seq-map</code> must be of equal length&#8212;i.e. same
      number of bars and same metrical structure. For this piece,
      all <code>rthm-seq</code> objects have been made equal in length and
      meter in the <code>rthm-seq-palette</code> so that all combinations are
      possible.  </p>

    <p>See the documentation on
      <a href="./rsp-rsm.html#rthm-maps">rthm-seq-maps</a> for more
      detail.</p>

    <pre class="source"> :rthm-seq-map
 '((1 ((flt (seq1 seq1 seq2 seq1 seq2)) 
       (clr (seq1 seq2 seq1 seq2 seq1)) 
       (vln-one (seq1 seq1 seq2 seq1 seq2))   
       (vla (seq1 seq2 seq1 seq2 seq1))   
       (cel (seq1 seq1 seq2 seq1 seq2))))
   (2 ((flt (seq1 seq1 seq2 seq1 seq2 seq1 seq2))
       (clr (seq1 seq1 seq3 seq1 seq3 seq1 seq3))
       (vln-one (seq2 seq2 seq3 seq2 seq3 seq2 seq3))  
       (vla (seq2 seq2 seq1 seq2 seq1 seq2 seq1))  
       (cel (seq3 seq3 seq2 seq3 seq2 seq3 seq2))))  
   (3 ((flt (seq1 seq1 seq2 seq1 seq2 seq1 seq2 seq2 seq1 seq2 seq2))
       (clr (seq2 seq2 seq3 seq2 seq3 seq2 seq3 seq3 seq2 seq3 seq3))
       (vln-one (seq3 seq3 seq4 seq3 seq4 seq3 seq4 seq4 seq3 seq4 seq4)) 
       (vla (seq4 seq4 seq3 seq4 seq3 seq4 seq3 seq3 seq4 seq3 seq3))  
       (cel (seq4 seq4 seq2 seq4 seq2 seq4 seq2 seq2 seq4 seq2 seq2))))  
   (4 ((flt (seq4 seq3 seq4 seq1 seq4 seq1 seq1))  
       (clr (seq3 seq2 seq3 seq2 seq1 seq2 seq1))
       (vln-one (seq2 seq1 seq1 seq1 seq2 seq1 seq1)) 
       (vla (seq4 seq3 seq4 seq2 seq1 seq1 seq1)) 
       (cel (seq2 seq2 seq2 seq1 seq2 seq1 seq1))))))</pre>

    <h3>The output</h3>
    <p>The <code>make-slippery-chicken</code> function allocates all of the
      musical data it generates to a global variable created from the first
      argument that it is passed. This makes it possible to generate the
      various forms of output separately, after the generation of the musical
      data, as is seen here.</p>

    <p>More information on the various forms of output can be found on
      the <a href="./output.html">output</a> page.</p>
    
    <h4 id="midi">MIDI</h4>
    <p>MIDI output can be generated by <em>slippery chicken</em> using
      the <code>midi-play</code> method. This method takes as its only required
      argument the global variable defined as the first argument to
      the <code>make-slippery-chicken</code> function. The other argument
      specified here, <code>:midi-file</code>, is the directory path and file
      name for the output to be generated (which defaults to "/tmp/sc.mid" if
      not specified). The file name should end with the
      suffix <code>.mid</code> for ease of opening after generation.</p>

    <pre class="source">
(midi-play +primary-disposition+ :midi-file "/tmp/primary-disposition.mid")</pre>

    <p>See the User Guide entry for <a href="output.html#midi">MIDI</a> for
      more details on the other arguments to <code>midi-play</code>.</p>

    <h4 id="cmn">Common Music Notation</h4>
    <p>The first printable output option in this example is that of Common
      Music Notation using the <code>cmn-display</code> method. This method,
      too, takes as its first argument the variable defined as the first
      argument to the <code>make-slippery-chicken</code>
      function. The <code>:file</code> argument allows the user to specify the
      directory path and file name for the output generated. CMN produces
      encapsulated post-script files, so adding the <code>.eps</code> suffix to
      the file name will facilitate opening the file later.</p>

    <pre class="source">
(cmn-display +primary-disposition+ :file "/tmp/primary-disposition.eps")</pre>

    <p>See the User Guide entry for <a href="output.html#cmn">CMN</a> for more
      details on the other arguments to <code>cmn-display</code>.</p>
      
    <h4 id="lilypond">LilyPond</h4> <p>On OSX with SBCL we can call
    <code>lp-display</code> to generate score PDFs via Lilypond.  This itself
    is a wrapper for <code>write-lp-data-for-all</code>: after calling that
    method, <code>lp-display</code> calls Lilypond and then opens the PDF
    automatically.  <code>lp-display</code> takes all the same arguments as
    <code>write-lp-data-for-all</code>. As that method works in all Lisps on
    all systems we will confine all of the Lilypond functionality documentation
    here and elsewhere to it.</p>

   <p>The <code>write-lp-data-for-all</code> method produces all of the files
    LilyPond needs to typeset the given musical data. As with the other output
    methods, this method takes as its first argument the variable defined as
    the first argument to the <code>make-slippery-chicken</code> function. The
    <code>write-lp-data-for-all</code> method generates its output file names
    automatically based on the <code>title</code> slot of the given
    <code>slippery-chicken</code> object. Because of this, the method requires
    only the base directory path, and not the file name, if the output path is
    specified by the user.</p>

    <p class="nb">NB: LilyPond can take a long time to render output, during
      which time it is unresponsive and may appear to have hung or frozen.</p>

    <p class="nb">NB: <a href="#lp-ins-names">See note above</a> about Lilypond
    and instrument names.

    <pre class="source">
(write-lp-data-for-all +primary-disposition+ :base-path "/tmp/")</pre>

    <p>See the User Guide entry for <a href="output.html#lilypond">LilyPond</a>
      for more details on the other arguments
      to <code>write-lp-data-for-all</code>.</p>

    <p>As long as CMN is installed and set up properly to interact with
      <em>slippery chicken</em>, both LilyPond files and CMN output, as well as
      a MIDI file, can be generated at the same time. </p>

    <pre class="source">
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; 

;;; EOF primary-disposition.lsp</pre>

    <h3 id="evaluating">Processing the code and producing output</h3>
    <p>The code presented in this example must be processed ("evaluated") in
      order to generate the musical data and produce any desired output
      files. This can be done in a number of ways. The first way is to enter
      each fully-closed expression at the <code>SC></code> prompt in the Lisp
      listener. However, this approach may be rather unwieldy for long passages
      of code. </p>
    
    <p>The second approach assumes that the code is being written using the
      text-editing software Emacs and the SLIME Lisp-interaction mode. In this
      case, the cursor can be placed after the final parenthesis of each
      fully-closed expression and the key-command <code>C-x C-e</code> can be
      performed to evaluate each expression individually. More information on
      this approach can be found at
      the <a href="http://www.gnu.org/software/emacs/">Emacs</a>
      and <a href="http://common-lisp.net/project/slime/">SLIME</a>
      websites.</p>

    <p>The third and recommended approach is to enter and save the code into an
      ASCII-only text file with the suffix <code>.lsp</code>. It is important
      to be sure that the operating system is not automatically attaching and
      hiding a <code>.txt</code> or other suffix to your file. It is also
      important to use a text-only text editor such as WordPad or TextWrangler
      (or Emacs), as many text-editing applications include hidden markup
      commands that may prevent the code from evaluating properly. </p>

    <pre class="source">
SC> (load "/path/to/primary-disposition.lsp")</pre>

    <p>More information on loading CMN, <em>slippery chicken</em>, and
      individual <em>slippery chicken</em> files can be found on
      the <a href="../installation.html">installation</a> page.</p>

    <h3>Conclusion</h3>
    <p>Depending on how <em>slippery chicken</em> was installed, running this
      code should produce at the very least a MIDI file. This is a Type 1 MIDI
      file (one channel per instrument), and can be imported into other
      sequencer or notation software. </p>

    <p>LilyPond and CMN output will be created if the relevant code is
      uncommented in the downloaded file.</p>
      
    <p>Should this have been done, <em>slippery chicken</em> should also have
      produced <code>.ly</code> files that can be open and rendered using
      LilyPond, resulting in a PDF of the score and/or parts.</p>

    <p>Should CMN have been installed to interact with 
      <em>slippery chicken</em>, and the corresponding code uncommented in the
      file, an <code>.eps</code> file should also have been produced. That file
      can be opened using Preview.app on a Macintosh (where it will be
      immediately converted to PDF), or, for example, Ghostscript with
      Ghostview or GSview on other platforms.</p>
    
    <!-- **************************************************************** --> 
    <!-- This spacer <br> is necessary as a buffer between the content and
         the footer. It cannot be added as padding to #push, since #push has to
         be the same size as #footer in order for the dynamic placement to work
         properly --> 
    <br /><br />
    <div id="push"></div>
    </div>
    <script type="text/javascript">footer();</script>
    <noscript>Your browser does not support JavaScript!</noscript>
  </body>
</html>
